%uczenie predyktora oe
clear all;
n=0; farx(n+1)=3.052400e+003; foe(n+1)=3.062703e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.562925e+003; foe(n+1)=2.569844e+003; krok(n+1)=3.395966e-004; ng(n+1)=1.579106e+003;
n=2; farx(n+1)=6.202270e+002; foe(n+1)=6.403579e+002; krok(n+1)=4.806036e-003; ng(n+1)=5.369057e+002;
n=3; farx(n+1)=6.140961e+002; foe(n+1)=5.751267e+002; krok(n+1)=1.467758e-004; ng(n+1)=1.998117e+003;
n=4; farx(n+1)=1.009146e+003; foe(n+1)=5.281723e+002; krok(n+1)=2.121656e-003; ng(n+1)=2.008263e+003;
n=5; farx(n+1)=1.079390e+003; foe(n+1)=5.095720e+002; krok(n+1)=2.378377e-002; ng(n+1)=6.590824e+002;
n=6; farx(n+1)=9.441773e+002; foe(n+1)=4.929231e+002; krok(n+1)=1.224172e-001; ng(n+1)=5.438085e+002;
n=7; farx(n+1)=5.744859e+002; foe(n+1)=4.709635e+002; krok(n+1)=4.828142e-002; ng(n+1)=4.635794e+002;
n=8; farx(n+1)=2.772441e+002; foe(n+1)=3.521773e+002; krok(n+1)=1.083782e-001; ng(n+1)=8.401361e+002;
n=9; farx(n+1)=2.063098e+002; foe(n+1)=3.431139e+002; krok(n+1)=6.237096e-002; ng(n+1)=6.816073e+002;
n=10; farx(n+1)=6.814512e+001; foe(n+1)=2.906375e+002; krok(n+1)=3.238984e-001; ng(n+1)=1.201753e+003;
n=11; farx(n+1)=7.084702e+001; foe(n+1)=2.698886e+002; krok(n+1)=1.497423e-001; ng(n+1)=1.262468e+003;
n=12; farx(n+1)=7.507744e+001; foe(n+1)=2.665269e+002; krok(n+1)=4.756755e-002; ng(n+1)=7.959829e+002;
n=13; farx(n+1)=4.386912e+001; foe(n+1)=1.700661e+002; krok(n+1)=2.186873e+000; ng(n+1)=8.192173e+002;
n=14; farx(n+1)=4.177107e+001; foe(n+1)=1.604272e+002; krok(n+1)=7.045190e-002; ng(n+1)=7.319207e+002;
n=15; farx(n+1)=3.274216e+001; foe(n+1)=1.288604e+002; krok(n+1)=2.994154e-001; ng(n+1)=1.317792e+003;
n=16; farx(n+1)=2.985591e+001; foe(n+1)=1.172204e+002; krok(n+1)=1.738735e-001; ng(n+1)=1.620545e+003;
n=17; farx(n+1)=1.945653e+001; foe(n+1)=1.007733e+002; krok(n+1)=7.382907e-001; ng(n+1)=1.077385e+003;
n=18; farx(n+1)=1.293038e+001; foe(n+1)=7.478356e+001; krok(n+1)=1.569476e+000; ng(n+1)=2.557963e+002;
n=19; farx(n+1)=1.033924e+001; foe(n+1)=6.977019e+001; krok(n+1)=4.967261e-001; ng(n+1)=8.237741e+002;
n=20; farx(n+1)=7.363628e+000; foe(n+1)=5.943566e+001; krok(n+1)=1.006124e+000; ng(n+1)=8.845540e+002;
n=21; farx(n+1)=7.791657e+000; foe(n+1)=5.625126e+001; krok(n+1)=4.352152e-001; ng(n+1)=1.533913e+003;
n=22; farx(n+1)=8.306042e+000; foe(n+1)=5.482738e+001; krok(n+1)=1.845727e-001; ng(n+1)=2.555841e+002;
n=23; farx(n+1)=9.110919e+000; foe(n+1)=5.265883e+001; krok(n+1)=4.406062e-001; ng(n+1)=4.096494e+002;
n=24; farx(n+1)=6.660263e+000; foe(n+1)=5.065132e+001; krok(n+1)=1.196555e+000; ng(n+1)=3.608728e+002;
n=25; farx(n+1)=6.099491e+000; foe(n+1)=4.964872e+001; krok(n+1)=6.011939e-001; ng(n+1)=5.538553e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=6.078680e+000; foe(n+1)=4.960799e+001; krok(n+1)=2.639833e-006; ng(n+1)=2.571460e+002;
n=27; farx(n+1)=6.115185e+000; foe(n+1)=4.958209e+001; krok(n+1)=1.338477e-005; ng(n+1)=8.234085e+001;
n=28; farx(n+1)=6.177283e+000; foe(n+1)=4.955058e+001; krok(n+1)=7.813213e-005; ng(n+1)=4.205182e+001;
n=29; farx(n+1)=6.106808e+000; foe(n+1)=4.903857e+001; krok(n+1)=2.380740e-003; ng(n+1)=3.083023e+001;
n=30; farx(n+1)=6.413946e+000; foe(n+1)=4.867645e+001; krok(n+1)=2.637175e-003; ng(n+1)=2.137571e+002;
n=31; farx(n+1)=6.263993e+000; foe(n+1)=4.855378e+001; krok(n+1)=1.640492e-002; ng(n+1)=4.780288e+002;
n=32; farx(n+1)=6.615548e+000; foe(n+1)=4.850074e+001; krok(n+1)=4.048730e-002; ng(n+1)=7.030871e+002;
n=33; farx(n+1)=6.217167e+000; foe(n+1)=4.811128e+001; krok(n+1)=1.068901e+000; ng(n+1)=6.376377e+002;
n=34; farx(n+1)=5.977464e+000; foe(n+1)=4.781910e+001; krok(n+1)=1.535939e+000; ng(n+1)=2.125645e+002;
n=35; farx(n+1)=5.888900e+000; foe(n+1)=4.774859e+001; krok(n+1)=6.014376e-001; ng(n+1)=2.765369e+002;
n=36; farx(n+1)=5.677699e+000; foe(n+1)=4.765998e+001; krok(n+1)=9.709553e-001; ng(n+1)=3.468046e+002;
n=37; farx(n+1)=5.373617e+000; foe(n+1)=4.759000e+001; krok(n+1)=1.556785e+000; ng(n+1)=1.441445e+002;
n=38; farx(n+1)=5.330816e+000; foe(n+1)=4.756473e+001; krok(n+1)=1.422745e+000; ng(n+1)=1.435055e+002;
n=39; farx(n+1)=5.229447e+000; foe(n+1)=4.755136e+001; krok(n+1)=3.693268e-001; ng(n+1)=4.501852e+001;
n=40; farx(n+1)=5.106049e+000; foe(n+1)=4.754357e+001; krok(n+1)=7.847380e-001; ng(n+1)=4.882399e+001;
n=41; farx(n+1)=5.059793e+000; foe(n+1)=4.753908e+001; krok(n+1)=1.355546e+000; ng(n+1)=4.465866e+001;
n=42; farx(n+1)=5.019499e+000; foe(n+1)=4.753653e+001; krok(n+1)=1.257512e+000; ng(n+1)=7.114452e+001;
n=43; farx(n+1)=4.977815e+000; foe(n+1)=4.753604e+001; krok(n+1)=4.147513e-001; ng(n+1)=1.529997e+001;
n=44; farx(n+1)=4.940164e+000; foe(n+1)=4.753579e+001; krok(n+1)=1.080691e+000; ng(n+1)=8.586647e+000;
n=45; farx(n+1)=4.938731e+000; foe(n+1)=4.753574e+001; krok(n+1)=7.113726e-001; ng(n+1)=6.996269e+000;
n=46; farx(n+1)=4.936250e+000; foe(n+1)=4.753572e+001; krok(n+1)=1.420334e+000; ng(n+1)=8.193930e+000;
n=47; farx(n+1)=4.933089e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.856466e+000; ng(n+1)=1.220367e+000;
n=48; farx(n+1)=4.935646e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.190119e+000; ng(n+1)=7.379441e-001;
n=49; farx(n+1)=4.935714e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.020283e+000; ng(n+1)=2.403475e-001;
n=50; farx(n+1)=4.935714e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.126542e-005; ng(n+1)=2.039489e-002;
%odnowa zmiennej metryki
n=51; farx(n+1)=4.935713e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.052562e-006; ng(n+1)=2.039463e-002;
n=52; farx(n+1)=4.935717e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.408581e-005; ng(n+1)=4.419860e-003;
n=53; farx(n+1)=4.935717e+000; foe(n+1)=4.753571e+001; krok(n+1)=6.503681e-006; ng(n+1)=8.502019e-004;
n=54; farx(n+1)=4.935699e+000; foe(n+1)=4.753571e+001; krok(n+1)=7.167066e-003; ng(n+1)=3.509194e-004;
n=55; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.841672e-003; ng(n+1)=2.931101e-004;
n=56; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.183513e-006; ng(n+1)=9.114763e-005;
n=57; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=4.908235e-011; ng(n+1)=9.114654e-005;
n=58; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=9.719210e-009; ng(n+1)=9.114653e-005;
n=59; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.840873e-008; ng(n+1)=9.114655e-005;
n=60; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.218515e-010; ng(n+1)=9.114655e-005;
n=61; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=4.113104e-009; ng(n+1)=9.114654e-005;
n=62; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.856108e-007; ng(n+1)=9.114655e-005;
n=63; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.755507e-010; ng(n+1)=9.114676e-005;
n=64; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.108148e-009; ng(n+1)=9.114677e-005;
n=65; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.187394e-007; ng(n+1)=9.114679e-005;
n=66; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.279432e-010; ng(n+1)=9.114781e-005;
n=67; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=4.573077e-010; ng(n+1)=9.114781e-005;
n=68; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.539463e-005; ng(n+1)=9.114780e-005;
n=69; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=6.805053e-008; ng(n+1)=9.115158e-005;
 % z³y kierunek w metodzie zm - odnowa 
n=70; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.889922e-006; ng(n+1)=9.115159e-005;
n=71; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=8.056201e-006; ng(n+1)=1.583035e-004;
n=72; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.649435e-005; ng(n+1)=2.472975e-004;
n=73; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.393633e-005; ng(n+1)=2.224509e-004;
n=74; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.593697e-005; ng(n+1)=2.224543e-004;
n=75; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=6.982719e-009; ng(n+1)=2.223973e-004;
%odnowa zmiennej metryki
 % z³y kierunek w metodzie zm - odnowa 
 % z³y kierunek w metodzie zm po wykonaniu odnowy

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
