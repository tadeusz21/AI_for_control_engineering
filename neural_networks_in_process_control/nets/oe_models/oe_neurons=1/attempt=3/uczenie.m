%uczenie predyktora oe
clear all;
n=0; farx(n+1)=3.065090e+003; foe(n+1)=3.053575e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.657838e+003; foe(n+1)=2.548068e+003; krok(n+1)=3.569431e-004; ng(n+1)=1.505334e+003;
n=2; farx(n+1)=6.865882e+002; foe(n+1)=5.383059e+002; krok(n+1)=4.150488e-003; ng(n+1)=6.823081e+002;
n=3; farx(n+1)=6.606238e+002; foe(n+1)=4.774486e+002; krok(n+1)=3.534374e-004; ng(n+1)=1.020958e+003;
n=4; farx(n+1)=7.569877e+002; foe(n+1)=4.707079e+002; krok(n+1)=1.929064e-003; ng(n+1)=6.136909e+002;
n=5; farx(n+1)=6.831174e+002; foe(n+1)=4.491194e+002; krok(n+1)=4.440041e-003; ng(n+1)=2.389144e+002;
n=6; farx(n+1)=6.820252e+002; foe(n+1)=4.373664e+002; krok(n+1)=1.514225e-002; ng(n+1)=3.496378e+002;
n=7; farx(n+1)=6.442886e+002; foe(n+1)=4.275272e+002; krok(n+1)=9.990853e-002; ng(n+1)=3.329253e+002;
n=8; farx(n+1)=3.311240e+002; foe(n+1)=3.563635e+002; krok(n+1)=5.786742e-001; ng(n+1)=3.279309e+002;
n=9; farx(n+1)=1.512225e+002; foe(n+1)=3.176216e+002; krok(n+1)=8.643496e-002; ng(n+1)=4.929888e+002;
n=10; farx(n+1)=1.361660e+002; foe(n+1)=3.074143e+002; krok(n+1)=1.047148e-001; ng(n+1)=1.298482e+003;
n=11; farx(n+1)=1.090210e+002; foe(n+1)=2.744383e+002; krok(n+1)=8.896431e-001; ng(n+1)=1.062898e+003;
n=12; farx(n+1)=8.060881e+001; foe(n+1)=2.509713e+002; krok(n+1)=2.343012e-001; ng(n+1)=7.054077e+002;
n=13; farx(n+1)=7.475963e+001; foe(n+1)=2.447889e+002; krok(n+1)=1.219985e-002; ng(n+1)=1.508669e+003;
n=14; farx(n+1)=6.350890e+001; foe(n+1)=2.294803e+002; krok(n+1)=5.870903e-001; ng(n+1)=6.574327e+002;
n=15; farx(n+1)=4.426426e+001; foe(n+1)=1.711106e+002; krok(n+1)=1.189066e-001; ng(n+1)=2.003896e+003;
n=16; farx(n+1)=4.335244e+001; foe(n+1)=1.614890e+002; krok(n+1)=7.502825e-002; ng(n+1)=3.764839e+003;
n=17; farx(n+1)=2.904299e+001; foe(n+1)=1.231399e+002; krok(n+1)=1.000418e+000; ng(n+1)=2.236907e+003;
n=18; farx(n+1)=2.661559e+001; foe(n+1)=1.124201e+002; krok(n+1)=5.114232e-001; ng(n+1)=9.637426e+002;
n=19; farx(n+1)=2.316803e+001; foe(n+1)=1.019419e+002; krok(n+1)=2.172520e+000; ng(n+1)=1.756749e+003;
n=20; farx(n+1)=1.138501e+001; foe(n+1)=7.506747e+001; krok(n+1)=3.672200e+000; ng(n+1)=7.094999e+002;
n=21; farx(n+1)=1.054371e+001; foe(n+1)=7.015719e+001; krok(n+1)=5.600723e-001; ng(n+1)=8.387229e+002;
n=22; farx(n+1)=8.692816e+000; foe(n+1)=6.593815e+001; krok(n+1)=2.828655e-001; ng(n+1)=1.227792e+003;
n=23; farx(n+1)=8.712929e+000; foe(n+1)=5.934823e+001; krok(n+1)=8.295027e-001; ng(n+1)=9.581241e+002;
n=24; farx(n+1)=7.514942e+000; foe(n+1)=5.769362e+001; krok(n+1)=7.113726e-001; ng(n+1)=7.474068e+002;
n=25; farx(n+1)=7.286320e+000; foe(n+1)=5.523067e+001; krok(n+1)=9.709405e-001; ng(n+1)=3.366639e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=7.013680e+000; foe(n+1)=5.474558e+001; krok(n+1)=1.759837e-005; ng(n+1)=4.275891e+002;
n=27; farx(n+1)=6.986190e+000; foe(n+1)=5.463118e+001; krok(n+1)=4.273013e-006; ng(n+1)=3.316603e+002;
n=28; farx(n+1)=7.268552e+000; foe(n+1)=5.399536e+001; krok(n+1)=8.138043e-005; ng(n+1)=1.753380e+002;
n=29; farx(n+1)=7.377004e+000; foe(n+1)=5.123317e+001; krok(n+1)=8.500296e-004; ng(n+1)=1.345883e+002;
n=30; farx(n+1)=7.176139e+000; foe(n+1)=5.024984e+001; krok(n+1)=7.947193e-003; ng(n+1)=2.476763e+002;
n=31; farx(n+1)=6.933867e+000; foe(n+1)=5.017641e+001; krok(n+1)=7.757671e-003; ng(n+1)=6.994248e+002;
n=32; farx(n+1)=6.343253e+000; foe(n+1)=5.000764e+001; krok(n+1)=1.102898e-001; ng(n+1)=7.317792e+002;
n=33; farx(n+1)=6.450255e+000; foe(n+1)=4.914566e+001; krok(n+1)=3.477470e-001; ng(n+1)=6.182435e+002;
n=34; farx(n+1)=6.503109e+000; foe(n+1)=4.852017e+001; krok(n+1)=1.119298e+000; ng(n+1)=4.814169e+002;
n=35; farx(n+1)=6.422877e+000; foe(n+1)=4.810343e+001; krok(n+1)=8.375141e-001; ng(n+1)=1.309212e+002;
n=36; farx(n+1)=6.097977e+000; foe(n+1)=4.794646e+001; krok(n+1)=1.238762e+000; ng(n+1)=1.773124e+002;
n=37; farx(n+1)=5.802281e+000; foe(n+1)=4.775525e+001; krok(n+1)=1.203864e+000; ng(n+1)=4.289134e+002;
n=38; farx(n+1)=5.691533e+000; foe(n+1)=4.764605e+001; krok(n+1)=6.809733e-001; ng(n+1)=9.554246e+001;
n=39; farx(n+1)=5.563611e+000; foe(n+1)=4.762176e+001; krok(n+1)=6.435764e-001; ng(n+1)=8.838719e+001;
n=40; farx(n+1)=5.225231e+000; foe(n+1)=4.757898e+001; krok(n+1)=1.778590e+000; ng(n+1)=2.155752e+002;
n=41; farx(n+1)=5.222344e+000; foe(n+1)=4.756568e+001; krok(n+1)=4.884576e-001; ng(n+1)=8.057931e+001;
n=42; farx(n+1)=5.175423e+000; foe(n+1)=4.755292e+001; krok(n+1)=6.986165e-001; ng(n+1)=2.977567e+001;
n=43; farx(n+1)=5.091966e+000; foe(n+1)=4.754262e+001; krok(n+1)=1.561580e+000; ng(n+1)=3.643696e+001;
n=44; farx(n+1)=5.099559e+000; foe(n+1)=4.753972e+001; krok(n+1)=7.426091e-001; ng(n+1)=6.380068e+001;
n=45; farx(n+1)=4.991017e+000; foe(n+1)=4.753696e+001; krok(n+1)=2.355579e+000; ng(n+1)=1.848140e+001;
n=46; farx(n+1)=4.972557e+000; foe(n+1)=4.753615e+001; krok(n+1)=8.228538e-001; ng(n+1)=2.264013e+001;
n=47; farx(n+1)=4.931601e+000; foe(n+1)=4.753585e+001; krok(n+1)=7.725027e-001; ng(n+1)=4.787524e+000;
n=48; farx(n+1)=4.927668e+000; foe(n+1)=4.753577e+001; krok(n+1)=6.608354e-001; ng(n+1)=2.988349e+000;
n=49; farx(n+1)=4.931273e+000; foe(n+1)=4.753572e+001; krok(n+1)=1.749195e+000; ng(n+1)=8.327040e+000;
n=50; farx(n+1)=4.932906e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.625559e+000; ng(n+1)=3.768051e+000;
%odnowa zmiennej metryki
n=51; farx(n+1)=4.932874e+000; foe(n+1)=4.753571e+001; krok(n+1)=9.922927e-007; ng(n+1)=1.564282e+000;
n=52; farx(n+1)=4.932875e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.892536e-006; ng(n+1)=5.867245e-002;
n=53; farx(n+1)=4.932954e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.713251e-003; ng(n+1)=1.871867e-002;
n=54; farx(n+1)=4.932844e+000; foe(n+1)=4.753571e+001; krok(n+1)=6.401041e-005; ng(n+1)=1.136646e-001;
n=55; farx(n+1)=4.932525e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.891067e-003; ng(n+1)=2.210098e-002;
n=56; farx(n+1)=4.933426e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.221469e-002; ng(n+1)=5.104348e-003;
n=57; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.570381e-001; ng(n+1)=5.220657e-003;
n=58; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.068400e-005; ng(n+1)=1.379791e-002;
n=59; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.384035e-006; ng(n+1)=1.379763e-002;
n=60; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.324083e-005; ng(n+1)=1.379755e-002;
n=61; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=4.283100e-006; ng(n+1)=1.379709e-002;
n=62; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.227646e-006; ng(n+1)=1.379703e-002;
n=63; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.645242e-008; ng(n+1)=1.379702e-002;
n=64; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.159402e-009; ng(n+1)=1.379702e-002;
n=65; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.565652e-010; ng(n+1)=1.379702e-002;
n=66; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.715315e-010; ng(n+1)=1.379702e-002;
 % z造 kierunek w metodzie zm - odnowa 
n=67; farx(n+1)=4.935685e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.514078e-006; ng(n+1)=1.379702e-002;
n=68; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.370699e-006; ng(n+1)=6.441643e-003;
n=69; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.531142e-009; ng(n+1)=1.932449e-004;
n=70; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.029142e-005; ng(n+1)=1.932440e-004;
n=71; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.012429e-005; ng(n+1)=1.932390e-004;
n=72; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.985241e-009; ng(n+1)=1.932015e-004;
n=73; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.192364e-010; ng(n+1)=1.932015e-004;
n=74; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=4.179450e-008; ng(n+1)=1.932015e-004;
n=75; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.538709e-009; ng(n+1)=1.932099e-004;
%odnowa zmiennej metryki
n=76; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.407312e-011; ng(n+1)=1.932099e-004;
n=77; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.190341e-011; ng(n+1)=1.932043e-004;
n=78; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.331765e-011; ng(n+1)=1.932043e-004;
 % z造 kierunek w metodzie zm - odnowa 
n=79; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.558333e-012; ng(n+1)=1.932043e-004;
 % z造 kierunek w metodzie zm - odnowa 
 % z造 kierunek w metodzie zm po wykonaniu odnowy

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
