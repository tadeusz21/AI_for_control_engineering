%uczenie predyktora oe
clear all;
n=0; farx(n+1)=3.063669e+003; foe(n+1)=3.063110e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.607802e+003; foe(n+1)=2.609007e+003; krok(n+1)=3.347436e-004; ng(n+1)=1.314151e+003;
n=2; farx(n+1)=5.093398e+002; foe(n+1)=5.110854e+002; krok(n+1)=3.112854e-002; ng(n+1)=1.175612e+002;
n=3; farx(n+1)=5.083483e+002; foe(n+1)=5.067033e+002; krok(n+1)=4.685521e-005; ng(n+1)=6.923517e+002;
n=4; farx(n+1)=5.680385e+002; foe(n+1)=4.687892e+002; krok(n+1)=9.100900e-003; ng(n+1)=7.602389e+002;
n=5; farx(n+1)=6.412543e+002; foe(n+1)=4.643432e+002; krok(n+1)=8.442897e-003; ng(n+1)=3.739314e+002;
n=6; farx(n+1)=6.688814e+002; foe(n+1)=4.473228e+002; krok(n+1)=1.538927e-001; ng(n+1)=2.423296e+002;
n=7; farx(n+1)=6.720408e+002; foe(n+1)=4.420094e+002; krok(n+1)=7.364386e-002; ng(n+1)=2.542743e+002;
n=8; farx(n+1)=4.871027e+002; foe(n+1)=4.060193e+002; krok(n+1)=2.765919e+000; ng(n+1)=2.461804e+002;
n=9; farx(n+1)=4.117977e+002; foe(n+1)=3.986805e+002; krok(n+1)=9.270274e-001; ng(n+1)=1.939804e+002;
n=10; farx(n+1)=3.088480e+002; foe(n+1)=3.834951e+002; krok(n+1)=6.122388e-001; ng(n+1)=2.476646e+002;
n=11; farx(n+1)=1.537739e+002; foe(n+1)=3.541954e+002; krok(n+1)=2.800362e-001; ng(n+1)=3.974143e+002;
n=12; farx(n+1)=1.322241e+002; foe(n+1)=3.454358e+002; krok(n+1)=5.558094e-002; ng(n+1)=5.824932e+002;
n=13; farx(n+1)=1.327753e+002; foe(n+1)=3.291645e+002; krok(n+1)=6.659180e-002; ng(n+1)=1.177307e+003;
n=14; farx(n+1)=1.132704e+002; foe(n+1)=2.786224e+002; krok(n+1)=4.419445e-001; ng(n+1)=3.382848e+002;
n=15; farx(n+1)=1.123132e+002; foe(n+1)=2.627113e+002; krok(n+1)=5.360061e-002; ng(n+1)=5.836372e+002;
n=16; farx(n+1)=7.235334e+001; foe(n+1)=2.173420e+002; krok(n+1)=5.393754e-001; ng(n+1)=9.399877e+002;
n=17; farx(n+1)=6.015280e+001; foe(n+1)=1.779099e+002; krok(n+1)=7.851907e-002; ng(n+1)=1.366001e+003;
n=18; farx(n+1)=4.415683e+001; foe(n+1)=1.521004e+002; krok(n+1)=1.732520e-001; ng(n+1)=1.710565e+003;
n=19; farx(n+1)=3.192951e+001; foe(n+1)=1.360109e+002; krok(n+1)=5.312625e-001; ng(n+1)=8.092822e+002;
n=20; farx(n+1)=1.879467e+001; foe(n+1)=9.786597e+001; krok(n+1)=6.893469e-001; ng(n+1)=1.887763e+003;
n=21; farx(n+1)=1.819917e+001; foe(n+1)=9.095456e+001; krok(n+1)=2.013997e-001; ng(n+1)=8.374397e+002;
n=22; farx(n+1)=1.418984e+001; foe(n+1)=8.229404e+001; krok(n+1)=5.138574e-001; ng(n+1)=1.662282e+003;
n=23; farx(n+1)=1.511766e+001; foe(n+1)=7.470209e+001; krok(n+1)=6.537835e-001; ng(n+1)=4.975346e+002;
n=24; farx(n+1)=1.260837e+001; foe(n+1)=6.636389e+001; krok(n+1)=6.115403e-001; ng(n+1)=6.171926e+002;
n=25; farx(n+1)=9.678475e+000; foe(n+1)=6.163842e+001; krok(n+1)=4.063898e-001; ng(n+1)=1.348727e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=9.248062e+000; foe(n+1)=5.990249e+001; krok(n+1)=3.910923e-006; ng(n+1)=1.516925e+003;
n=27; farx(n+1)=9.455210e+000; foe(n+1)=5.972097e+001; krok(n+1)=5.385244e-005; ng(n+1)=1.380852e+002;
n=28; farx(n+1)=9.378747e+000; foe(n+1)=5.911943e+001; krok(n+1)=1.377639e-004; ng(n+1)=1.505434e+002;
n=29; farx(n+1)=8.634575e+000; foe(n+1)=5.578834e+001; krok(n+1)=7.770983e-004; ng(n+1)=1.682890e+002;
n=30; farx(n+1)=9.104083e+000; foe(n+1)=5.464564e+001; krok(n+1)=1.786211e-003; ng(n+1)=7.986321e+002;
n=31; farx(n+1)=8.841002e+000; foe(n+1)=5.435825e+001; krok(n+1)=5.852382e-003; ng(n+1)=1.193394e+003;
n=32; farx(n+1)=7.476639e+000; foe(n+1)=5.385194e+001; krok(n+1)=6.963444e-002; ng(n+1)=1.430659e+003;
n=33; farx(n+1)=7.083990e+000; foe(n+1)=5.171523e+001; krok(n+1)=8.049667e-001; ng(n+1)=1.402699e+003;
n=34; farx(n+1)=6.592124e+000; foe(n+1)=4.969142e+001; krok(n+1)=1.322970e+000; ng(n+1)=3.358366e+002;
n=35; farx(n+1)=6.608882e+000; foe(n+1)=4.911958e+001; krok(n+1)=5.122170e-001; ng(n+1)=4.381525e+002;
n=36; farx(n+1)=6.591854e+000; foe(n+1)=4.860343e+001; krok(n+1)=7.545111e-001; ng(n+1)=8.514548e+002;
n=37; farx(n+1)=6.029169e+000; foe(n+1)=4.800518e+001; krok(n+1)=2.262924e+000; ng(n+1)=2.822154e+002;
n=38; farx(n+1)=6.014290e+000; foe(n+1)=4.788546e+001; krok(n+1)=5.596492e-001; ng(n+1)=1.389010e+002;
n=39; farx(n+1)=6.054825e+000; foe(n+1)=4.779739e+001; krok(n+1)=4.865340e-001; ng(n+1)=3.355631e+002;
n=40; farx(n+1)=5.847191e+000; foe(n+1)=4.773620e+001; krok(n+1)=1.071175e+000; ng(n+1)=1.199950e+002;
n=41; farx(n+1)=5.446932e+000; foe(n+1)=4.763807e+001; krok(n+1)=1.037862e+000; ng(n+1)=1.805011e+002;
n=42; farx(n+1)=5.466144e+000; foe(n+1)=4.760225e+001; krok(n+1)=9.110982e-001; ng(n+1)=1.676956e+002;
n=43; farx(n+1)=5.339976e+000; foe(n+1)=4.757564e+001; krok(n+1)=5.203615e-001; ng(n+1)=1.028577e+002;
n=44; farx(n+1)=5.077224e+000; foe(n+1)=4.756049e+001; krok(n+1)=1.089353e+000; ng(n+1)=1.325172e+002;
n=45; farx(n+1)=5.070890e+000; foe(n+1)=4.754689e+001; krok(n+1)=7.525649e-001; ng(n+1)=9.459288e+001;
n=46; farx(n+1)=5.092359e+000; foe(n+1)=4.754136e+001; krok(n+1)=6.083905e-001; ng(n+1)=9.634889e+001;
n=47; farx(n+1)=5.046365e+000; foe(n+1)=4.753886e+001; krok(n+1)=7.583720e-001; ng(n+1)=3.828251e+001;
n=48; farx(n+1)=5.016404e+000; foe(n+1)=4.753807e+001; krok(n+1)=1.435748e+000; ng(n+1)=8.872290e+000;
n=49; farx(n+1)=4.981352e+000; foe(n+1)=4.753714e+001; krok(n+1)=2.591187e+000; ng(n+1)=2.299373e+001;
n=50; farx(n+1)=4.971141e+000; foe(n+1)=4.753586e+001; krok(n+1)=2.315580e+000; ng(n+1)=4.425758e+001;
%odnowa zmiennej metryki
n=51; farx(n+1)=4.971019e+000; foe(n+1)=4.753585e+001; krok(n+1)=1.789244e-006; ng(n+1)=2.569440e+000;
n=52; farx(n+1)=4.970882e+000; foe(n+1)=4.753585e+001; krok(n+1)=3.947840e-006; ng(n+1)=2.161129e+000;
n=53; farx(n+1)=4.970257e+000; foe(n+1)=4.753585e+001; krok(n+1)=2.364703e-005; ng(n+1)=8.750391e-001;
n=54; farx(n+1)=4.966881e+000; foe(n+1)=4.753581e+001; krok(n+1)=1.411868e-003; ng(n+1)=3.554824e-001;
n=55; farx(n+1)=4.956342e+000; foe(n+1)=4.753576e+001; krok(n+1)=9.393654e-003; ng(n+1)=1.702735e-001;
n=56; farx(n+1)=4.952054e+000; foe(n+1)=4.753575e+001; krok(n+1)=4.134280e-002; ng(n+1)=2.426455e-002;
n=57; farx(n+1)=4.935829e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.400181e-001; ng(n+1)=3.902218e-002;
n=58; farx(n+1)=4.935750e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.013731e+000; ng(n+1)=4.291680e-001;
n=59; farx(n+1)=4.935750e+000; foe(n+1)=4.753571e+001; krok(n+1)=7.116096e-010; ng(n+1)=5.630289e-003;
n=60; farx(n+1)=4.935750e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.990494e-005; ng(n+1)=5.630289e-003;
n=61; farx(n+1)=4.935750e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.069939e-005; ng(n+1)=5.631291e-003;
n=62; farx(n+1)=4.935750e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.349696e-006; ng(n+1)=5.631207e-003;
n=63; farx(n+1)=4.935750e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.444886e-005; ng(n+1)=5.631186e-003;
n=64; farx(n+1)=4.935750e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.808260e-005; ng(n+1)=5.631113e-003;
n=65; farx(n+1)=4.935750e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.384553e-005; ng(n+1)=5.631019e-003;
n=66; farx(n+1)=4.935750e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.575152e-006; ng(n+1)=5.630945e-003;
n=67; farx(n+1)=4.935750e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.279983e-005; ng(n+1)=5.630926e-003;
n=68; farx(n+1)=4.935750e+000; foe(n+1)=4.753571e+001; krok(n+1)=8.058704e-006; ng(n+1)=5.630744e-003;
n=69; farx(n+1)=4.935750e+000; foe(n+1)=4.753571e+001; krok(n+1)=6.687119e-007; ng(n+1)=5.630699e-003;
n=70; farx(n+1)=4.935750e+000; foe(n+1)=4.753571e+001; krok(n+1)=6.078212e-006; ng(n+1)=5.630696e-003;
n=71; farx(n+1)=4.935750e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.670494e-009; ng(n+1)=5.630661e-003;
n=72; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.587363e-002; ng(n+1)=5.630662e-003;
n=73; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=7.840842e-006; ng(n+1)=6.142406e-003;
n=74; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.042165e-007; ng(n+1)=6.142362e-003;
n=75; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.840320e-009; ng(n+1)=6.142361e-003;
%odnowa zmiennej metryki
n=76; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.055924e-006; ng(n+1)=6.142361e-003;
n=77; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=6.394006e-006; ng(n+1)=1.204062e-003;
n=78; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.907853e-005; ng(n+1)=2.972833e-004;
n=79; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=6.220294e-007; ng(n+1)=2.679366e-004;
n=80; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.539324e-005; ng(n+1)=2.679336e-004;
 % z造 kierunek w metodzie zm - odnowa 
n=81; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.873148e-006; ng(n+1)=2.679749e-004;
n=82; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.362189e-006; ng(n+1)=4.710284e-004;
n=83; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.697378e-006; ng(n+1)=3.526302e-004;
n=84; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=6.737840e-006; ng(n+1)=3.528737e-004;
n=85; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.009506e-005; ng(n+1)=3.527014e-004;
n=86; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.860122e-005; ng(n+1)=3.525733e-004;
n=87; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.060792e-009; ng(n+1)=3.525618e-004;
n=88; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.208255e-009; ng(n+1)=3.525618e-004;
n=89; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.473884e-010; ng(n+1)=3.525618e-004;
n=90; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.986793e-010; ng(n+1)=3.525618e-004;
n=91; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.966846e-009; ng(n+1)=3.525618e-004;
n=92; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.179187e-009; ng(n+1)=3.525618e-004;
 % z造 kierunek w metodzie zm - odnowa 
n=93; farx(n+1)=4.935695e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.458284e-013; ng(n+1)=3.525618e-004;
 % z造 kierunek w metodzie zm - odnowa 
 % z造 kierunek w metodzie zm po wykonaniu odnowy

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
