%uczenie predyktora oe
clear all;
n=0; farx(n+1)=3.048032e+003; foe(n+1)=3.007648e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.520558e+003; foe(n+1)=2.446659e+003; krok(n+1)=3.812868e-004; ng(n+1)=1.833419e+003;
n=2; farx(n+1)=8.039071e+002; foe(n+1)=7.218961e+002; krok(n+1)=2.093764e-003; ng(n+1)=1.171737e+003;
n=3; farx(n+1)=7.863883e+002; foe(n+1)=4.934407e+002; krok(n+1)=4.820713e-004; ng(n+1)=2.260924e+003;
n=4; farx(n+1)=9.530946e+002; foe(n+1)=4.793778e+002; krok(n+1)=1.170971e-003; ng(n+1)=1.067979e+003;
n=5; farx(n+1)=8.670220e+002; foe(n+1)=4.655902e+002; krok(n+1)=1.153579e-002; ng(n+1)=4.262729e+002;
n=6; farx(n+1)=8.692495e+002; foe(n+1)=4.630264e+002; krok(n+1)=3.050294e-003; ng(n+1)=5.590131e+002;
n=7; farx(n+1)=8.519214e+002; foe(n+1)=4.497936e+002; krok(n+1)=7.759105e-002; ng(n+1)=5.601909e+002;
n=8; farx(n+1)=3.985777e+002; foe(n+1)=3.836386e+002; krok(n+1)=1.561580e+000; ng(n+1)=5.121127e+002;
n=9; farx(n+1)=2.007300e+002; foe(n+1)=3.556033e+002; krok(n+1)=8.658973e-001; ng(n+1)=3.806413e+002;
n=10; farx(n+1)=1.033644e+002; foe(n+1)=3.169845e+002; krok(n+1)=5.281352e-001; ng(n+1)=8.392830e+002;
n=11; farx(n+1)=1.123484e+002; foe(n+1)=2.874331e+002; krok(n+1)=9.946858e-002; ng(n+1)=2.272954e+003;
n=12; farx(n+1)=8.818255e+001; foe(n+1)=2.613463e+002; krok(n+1)=1.414327e-001; ng(n+1)=2.284336e+003;
n=13; farx(n+1)=7.213377e+001; foe(n+1)=2.075588e+002; krok(n+1)=8.133525e-002; ng(n+1)=2.827698e+003;
n=14; farx(n+1)=6.005833e+001; foe(n+1)=1.925856e+002; krok(n+1)=2.186494e-001; ng(n+1)=1.653144e+003;
n=15; farx(n+1)=4.943611e+001; foe(n+1)=1.793757e+002; krok(n+1)=1.817918e-001; ng(n+1)=2.889569e+003;
n=16; farx(n+1)=3.860585e+001; foe(n+1)=1.428981e+002; krok(n+1)=1.296088e+000; ng(n+1)=6.818310e+002;
n=17; farx(n+1)=3.878024e+001; foe(n+1)=1.356218e+002; krok(n+1)=4.568872e-002; ng(n+1)=5.791748e+002;
n=18; farx(n+1)=1.959323e+001; foe(n+1)=1.076929e+002; krok(n+1)=2.125050e+000; ng(n+1)=9.291356e+002;
n=19; farx(n+1)=1.580571e+001; foe(n+1)=8.707840e+001; krok(n+1)=1.663205e+000; ng(n+1)=1.599294e+003;
n=20; farx(n+1)=1.421740e+001; foe(n+1)=8.279427e+001; krok(n+1)=1.228837e-001; ng(n+1)=2.047026e+003;
n=21; farx(n+1)=1.194103e+001; foe(n+1)=6.987609e+001; krok(n+1)=1.507294e+000; ng(n+1)=4.810772e+002;
n=22; farx(n+1)=1.053160e+001; foe(n+1)=6.137380e+001; krok(n+1)=7.021280e-001; ng(n+1)=5.057656e+002;
n=23; farx(n+1)=9.124732e+000; foe(n+1)=5.795979e+001; krok(n+1)=6.121507e-001; ng(n+1)=1.491331e+003;
n=24; farx(n+1)=6.929541e+000; foe(n+1)=5.497642e+001; krok(n+1)=1.668612e-001; ng(n+1)=1.505846e+003;
n=25; farx(n+1)=6.303999e+000; foe(n+1)=5.248709e+001; krok(n+1)=7.021280e-001; ng(n+1)=4.462848e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=6.196499e+000; foe(n+1)=5.228586e+001; krok(n+1)=3.142368e-006; ng(n+1)=5.825650e+002;
n=27; farx(n+1)=6.096011e+000; foe(n+1)=5.216310e+001; krok(n+1)=1.496279e-005; ng(n+1)=2.124726e+002;
n=28; farx(n+1)=5.989372e+000; foe(n+1)=5.204556e+001; krok(n+1)=9.776439e-005; ng(n+1)=8.085515e+001;
n=29; farx(n+1)=6.436741e+000; foe(n+1)=4.952475e+001; krok(n+1)=3.478135e-003; ng(n+1)=5.505940e+001;
n=30; farx(n+1)=6.404928e+000; foe(n+1)=4.950996e+001; krok(n+1)=1.548092e-003; ng(n+1)=5.141762e+002;
n=31; farx(n+1)=6.455247e+000; foe(n+1)=4.943703e+001; krok(n+1)=1.949868e-002; ng(n+1)=5.986966e+002;
n=32; farx(n+1)=6.840082e+000; foe(n+1)=4.937208e+001; krok(n+1)=3.012318e-002; ng(n+1)=6.652177e+002;
n=33; farx(n+1)=5.972189e+000; foe(n+1)=4.816085e+001; krok(n+1)=2.238597e+000; ng(n+1)=5.770358e+002;
n=34; farx(n+1)=5.988524e+000; foe(n+1)=4.788702e+001; krok(n+1)=4.195659e-001; ng(n+1)=3.831766e+002;
n=35; farx(n+1)=5.985763e+000; foe(n+1)=4.777642e+001; krok(n+1)=5.403454e-001; ng(n+1)=1.783023e+002;
n=36; farx(n+1)=5.744230e+000; foe(n+1)=4.768441e+001; krok(n+1)=2.765919e+000; ng(n+1)=8.711318e+001;
n=37; farx(n+1)=5.501814e+000; foe(n+1)=4.761540e+001; krok(n+1)=8.904025e-001; ng(n+1)=2.005378e+002;
n=38; farx(n+1)=5.384676e+000; foe(n+1)=4.758998e+001; krok(n+1)=5.360036e-001; ng(n+1)=2.032472e+002;
n=39; farx(n+1)=5.248119e+000; foe(n+1)=4.757165e+001; krok(n+1)=5.872046e-001; ng(n+1)=7.376381e+001;
n=40; farx(n+1)=5.252115e+000; foe(n+1)=4.755455e+001; krok(n+1)=1.207877e+000; ng(n+1)=8.502966e+001;
n=41; farx(n+1)=5.112477e+000; foe(n+1)=4.754276e+001; krok(n+1)=1.535939e+000; ng(n+1)=9.295638e+001;
n=42; farx(n+1)=5.075655e+000; foe(n+1)=4.753940e+001; krok(n+1)=8.417937e-001; ng(n+1)=8.331304e+001;
n=43; farx(n+1)=4.988622e+000; foe(n+1)=4.753653e+001; krok(n+1)=8.375141e-001; ng(n+1)=1.223392e+001;
n=44; farx(n+1)=4.950896e+000; foe(n+1)=4.753595e+001; krok(n+1)=7.992682e-001; ng(n+1)=1.382194e+001;
n=45; farx(n+1)=4.955501e+000; foe(n+1)=4.753578e+001; krok(n+1)=8.679464e-001; ng(n+1)=1.801912e+001;
n=46; farx(n+1)=4.940924e+000; foe(n+1)=4.753572e+001; krok(n+1)=8.536620e-001; ng(n+1)=6.860092e+000;
n=47; farx(n+1)=4.935683e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.324046e+000; ng(n+1)=2.541971e+000;
n=48; farx(n+1)=4.935725e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.489674e+000; ng(n+1)=4.644939e-001;
n=49; farx(n+1)=4.935546e+000; foe(n+1)=4.753571e+001; krok(n+1)=8.256204e-001; ng(n+1)=6.393355e-001;
n=50; farx(n+1)=4.935682e+000; foe(n+1)=4.753571e+001; krok(n+1)=9.820218e-001; ng(n+1)=8.343969e-002;
%odnowa zmiennej metryki
n=51; farx(n+1)=4.935683e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.047448e-006; ng(n+1)=1.119571e-002;
n=52; farx(n+1)=4.935683e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.139878e-005; ng(n+1)=9.437833e-004;
n=53; farx(n+1)=4.935683e+000; foe(n+1)=4.753571e+001; krok(n+1)=8.600086e-006; ng(n+1)=6.372804e-004;
n=54; farx(n+1)=4.935683e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.078403e-005; ng(n+1)=5.885098e-004;
n=55; farx(n+1)=4.935683e+000; foe(n+1)=4.753571e+001; krok(n+1)=7.150304e-006; ng(n+1)=5.884406e-004;
n=56; farx(n+1)=4.935683e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.575152e-006; ng(n+1)=5.884341e-004;
n=57; farx(n+1)=4.935683e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.725370e-005; ng(n+1)=5.884319e-004;
n=58; farx(n+1)=4.935683e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.119730e-005; ng(n+1)=5.883343e-004;
n=59; farx(n+1)=4.935683e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.690128e-009; ng(n+1)=5.883263e-004;
n=60; farx(n+1)=4.935683e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.847812e-009; ng(n+1)=5.883263e-004;
 % z³y kierunek w metodzie zm - odnowa 
n=61; farx(n+1)=4.935683e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.993274e-013; ng(n+1)=5.883262e-004;
n=62; farx(n+1)=4.935683e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.422102e-012; ng(n+1)=5.883259e-004;
 % z³y kierunek w metodzie zm - odnowa 
 % z³y kierunek w metodzie zm po wykonaniu odnowy

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
