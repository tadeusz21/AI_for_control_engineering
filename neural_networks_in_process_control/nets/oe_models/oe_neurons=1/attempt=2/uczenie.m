%uczenie predyktora oe
clear all;
n=0; farx(n+1)=3.056165e+003; foe(n+1)=3.056945e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.592202e+003; foe(n+1)=2.593490e+003; krok(n+1)=3.383827e-004; ng(n+1)=1.321018e+003;
n=2; farx(n+1)=5.182377e+002; foe(n+1)=5.328378e+002; krok(n+1)=7.191676e-003; ng(n+1)=3.426143e+002;
n=3; farx(n+1)=5.072902e+002; foe(n+1)=5.041389e+002; krok(n+1)=5.547503e-005; ng(n+1)=1.498255e+003;
n=4; farx(n+1)=6.446395e+002; foe(n+1)=4.800067e+002; krok(n+1)=4.430569e-004; ng(n+1)=1.692721e+003;
n=5; farx(n+1)=4.323201e+002; foe(n+1)=4.284729e+002; krok(n+1)=8.880083e-003; ng(n+1)=4.701266e+002;
n=6; farx(n+1)=4.320485e+002; foe(n+1)=4.272909e+002; krok(n+1)=1.776276e-003; ng(n+1)=1.539445e+003;
n=7; farx(n+1)=3.100117e+002; foe(n+1)=4.174908e+002; krok(n+1)=1.262969e-002; ng(n+1)=1.537437e+003;
n=8; farx(n+1)=2.003432e+002; foe(n+1)=4.037411e+002; krok(n+1)=1.589439e-002; ng(n+1)=2.953756e+003;
n=9; farx(n+1)=9.632270e+001; foe(n+1)=3.653557e+002; krok(n+1)=1.369307e-001; ng(n+1)=5.141833e+003;
n=10; farx(n+1)=4.223602e+001; foe(n+1)=2.838491e+002; krok(n+1)=3.550835e-001; ng(n+1)=8.769296e+003;
n=11; farx(n+1)=2.965062e+001; foe(n+1)=1.336040e+002; krok(n+1)=3.743784e-001; ng(n+1)=1.218705e+004;
n=12; farx(n+1)=2.361776e+001; foe(n+1)=9.988331e+001; krok(n+1)=3.762637e-001; ng(n+1)=1.455029e+003;
n=13; farx(n+1)=1.906129e+001; foe(n+1)=9.087301e+001; krok(n+1)=2.160660e-001; ng(n+1)=6.002911e+002;
n=14; farx(n+1)=1.614224e+001; foe(n+1)=8.081368e+001; krok(n+1)=7.461831e-001; ng(n+1)=1.080751e+003;
n=15; farx(n+1)=1.146417e+001; foe(n+1)=7.078994e+001; krok(n+1)=1.280929e+000; ng(n+1)=1.610193e+003;
n=16; farx(n+1)=8.585680e+000; foe(n+1)=6.308093e+001; krok(n+1)=6.577988e-001; ng(n+1)=1.896612e+003;
n=17; farx(n+1)=7.250589e+000; foe(n+1)=5.740527e+001; krok(n+1)=5.819545e-001; ng(n+1)=1.946934e+003;
n=18; farx(n+1)=6.793412e+000; foe(n+1)=5.522596e+001; krok(n+1)=1.585247e+000; ng(n+1)=4.289452e+002;
n=19; farx(n+1)=6.737215e+000; foe(n+1)=5.283703e+001; krok(n+1)=8.892951e-001; ng(n+1)=7.118132e+002;
n=20; farx(n+1)=7.043787e+000; foe(n+1)=5.157628e+001; krok(n+1)=7.763546e-001; ng(n+1)=4.854375e+002;
n=21; farx(n+1)=6.499140e+000; foe(n+1)=5.049232e+001; krok(n+1)=9.819795e-001; ng(n+1)=5.479851e+002;
n=22; farx(n+1)=5.968366e+000; foe(n+1)=4.973435e+001; krok(n+1)=8.295027e-001; ng(n+1)=2.381126e+002;
n=23; farx(n+1)=6.226302e+000; foe(n+1)=4.905563e+001; krok(n+1)=1.631092e+000; ng(n+1)=6.393869e+002;
n=24; farx(n+1)=6.355998e+000; foe(n+1)=4.875865e+001; krok(n+1)=9.205345e-001; ng(n+1)=1.157025e+002;
n=25; farx(n+1)=6.356992e+000; foe(n+1)=4.861858e+001; krok(n+1)=8.228538e-001; ng(n+1)=2.030993e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=6.369682e+000; foe(n+1)=4.860909e+001; krok(n+1)=1.416371e-005; ng(n+1)=5.987352e+001;
n=27; farx(n+1)=6.379283e+000; foe(n+1)=4.860690e+001; krok(n+1)=6.439438e-006; ng(n+1)=4.132721e+001;
n=28; farx(n+1)=6.417043e+000; foe(n+1)=4.859662e+001; krok(n+1)=1.530281e-005; ng(n+1)=5.733804e+001;
n=29; farx(n+1)=6.154234e+000; foe(n+1)=4.827564e+001; krok(n+1)=4.437686e-003; ng(n+1)=2.125364e+001;
n=30; farx(n+1)=5.886924e+000; foe(n+1)=4.814155e+001; krok(n+1)=2.564143e-003; ng(n+1)=4.295703e+001;
n=31; farx(n+1)=6.117229e+000; foe(n+1)=4.781972e+001; krok(n+1)=3.095635e-002; ng(n+1)=3.215276e+001;
n=32; farx(n+1)=5.589694e+000; foe(n+1)=4.772842e+001; krok(n+1)=1.150553e+000; ng(n+1)=1.584825e+002;
n=33; farx(n+1)=5.566251e+000; foe(n+1)=4.761274e+001; krok(n+1)=4.312599e-002; ng(n+1)=2.130362e+002;
n=34; farx(n+1)=5.465653e+000; foe(n+1)=4.758876e+001; krok(n+1)=8.049667e-001; ng(n+1)=1.414277e+002;
n=35; farx(n+1)=5.164940e+000; foe(n+1)=4.756592e+001; krok(n+1)=1.324463e+000; ng(n+1)=1.143416e+002;
n=36; farx(n+1)=5.162805e+000; foe(n+1)=4.755595e+001; krok(n+1)=8.536620e-001; ng(n+1)=1.164530e+002;
n=37; farx(n+1)=5.193973e+000; foe(n+1)=4.754635e+001; krok(n+1)=5.250759e-001; ng(n+1)=8.799742e+001;
n=38; farx(n+1)=5.078480e+000; foe(n+1)=4.753916e+001; krok(n+1)=1.152651e+000; ng(n+1)=1.243520e+001;
n=39; farx(n+1)=4.980059e+000; foe(n+1)=4.753659e+001; krok(n+1)=1.322970e+000; ng(n+1)=7.380320e+001;
n=40; farx(n+1)=4.953051e+000; foe(n+1)=4.753599e+001; krok(n+1)=7.676757e-001; ng(n+1)=1.545235e+001;
n=41; farx(n+1)=4.956851e+000; foe(n+1)=4.753579e+001; krok(n+1)=8.679464e-001; ng(n+1)=1.011399e+001;
n=42; farx(n+1)=4.944888e+000; foe(n+1)=4.753574e+001; krok(n+1)=7.746083e-001; ng(n+1)=2.659062e+000;
n=43; farx(n+1)=4.935506e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.295594e+000; ng(n+1)=2.500300e+000;
n=44; farx(n+1)=4.935409e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.242513e+000; ng(n+1)=1.098799e+000;
n=45; farx(n+1)=4.935656e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.087290e+000; ng(n+1)=2.817551e-001;
n=46; farx(n+1)=4.935656e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.602457e-006; ng(n+1)=2.990594e-002;
n=47; farx(n+1)=4.935656e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.108705e-007; ng(n+1)=2.990581e-002;
n=48; farx(n+1)=4.935656e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.937800e-008; ng(n+1)=2.990581e-002;
 % z³y kierunek w metodzie zm - odnowa 
n=49; farx(n+1)=4.935656e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.126936e-006; ng(n+1)=2.990581e-002;
n=50; farx(n+1)=4.935656e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.141736e-006; ng(n+1)=9.355019e-003;
%odnowa zmiennej metryki
n=51; farx(n+1)=4.935658e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.720017e-005; ng(n+1)=2.670947e-003;
n=52; farx(n+1)=4.935658e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.926265e-006; ng(n+1)=3.183125e-003;
n=53; farx(n+1)=4.935659e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.133026e-006; ng(n+1)=3.430476e-003;
n=54; farx(n+1)=4.935661e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.215721e-003; ng(n+1)=1.054231e-003;
n=55; farx(n+1)=4.935661e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.349696e-006; ng(n+1)=9.192310e-004;
n=56; farx(n+1)=4.935661e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.504753e-005; ng(n+1)=9.192115e-004;
n=57; farx(n+1)=4.935678e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.812841e-002; ng(n+1)=9.191962e-004;
n=58; farx(n+1)=4.935678e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.085468e-005; ng(n+1)=7.626085e-004;
n=59; farx(n+1)=4.935678e+000; foe(n+1)=4.753571e+001; krok(n+1)=9.087039e-007; ng(n+1)=7.625993e-004;
n=60; farx(n+1)=4.935678e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.005092e-006; ng(n+1)=7.625987e-004;
n=61; farx(n+1)=4.935678e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.430061e-005; ng(n+1)=7.625980e-004;
n=62; farx(n+1)=4.935678e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.817693e-006; ng(n+1)=7.625870e-004;
n=63; farx(n+1)=4.935678e+000; foe(n+1)=4.753571e+001; krok(n+1)=6.833629e-011; ng(n+1)=7.625855e-004;
n=64; farx(n+1)=4.935678e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.056552e-009; ng(n+1)=7.625855e-004;
n=65; farx(n+1)=4.935678e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.833253e-008; ng(n+1)=7.625856e-004;
n=66; farx(n+1)=4.935678e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.265341e-008; ng(n+1)=7.625855e-004;
n=67; farx(n+1)=4.935678e+000; foe(n+1)=4.753571e+001; krok(n+1)=8.310208e-006; ng(n+1)=7.625854e-004;
n=68; farx(n+1)=4.935678e+000; foe(n+1)=4.753571e+001; krok(n+1)=4.072534e-006; ng(n+1)=7.625762e-004;
n=69; farx(n+1)=4.935678e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.176374e-006; ng(n+1)=7.625714e-004;
n=70; farx(n+1)=4.935678e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.715583e-007; ng(n+1)=7.625705e-004;
 % z³y kierunek w metodzie zm - odnowa 
n=71; farx(n+1)=4.935678e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.375054e-007; ng(n+1)=7.625703e-004;
n=72; farx(n+1)=4.935678e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.278801e-005; ng(n+1)=3.814006e-004;
n=73; farx(n+1)=4.935677e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.794876e-004; ng(n+1)=3.929908e-004;
n=74; farx(n+1)=4.935670e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.945368e-004; ng(n+1)=1.170061e-003;
n=75; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.194844e-003; ng(n+1)=3.998800e-004;
%odnowa zmiennej metryki
n=76; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.709072e-006; ng(n+1)=4.403438e-004;
n=77; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.155324e-005; ng(n+1)=6.861159e-004;
n=78; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.349571e-005; ng(n+1)=3.552749e-004;
n=79; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.427562e-005; ng(n+1)=3.359328e-004;
n=80; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=6.165036e-006; ng(n+1)=3.359313e-004;
n=81; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.063207e-006; ng(n+1)=3.359031e-004;
n=82; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.402307e-009; ng(n+1)=3.359025e-004;
n=83; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.745680e-009; ng(n+1)=3.359025e-004;
n=84; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.133029e-010; ng(n+1)=3.359025e-004;
n=85; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=4.376580e-011; ng(n+1)=3.359025e-004;
n=86; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.337129e-009; ng(n+1)=3.359025e-004;
n=87; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.029459e-008; ng(n+1)=3.359026e-004;
 % z³y kierunek w metodzie zm - odnowa 
n=88; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.075011e-006; ng(n+1)=3.359025e-004;
n=89; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=7.204914e-006; ng(n+1)=1.877578e-004;
n=90; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=4.300043e-006; ng(n+1)=1.488357e-004;
n=91; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=4.250149e-006; ng(n+1)=1.498532e-004;
n=92; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.349696e-006; ng(n+1)=1.497624e-004;
n=93; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=8.825973e-006; ng(n+1)=1.497953e-004;
n=94; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.590069e-009; ng(n+1)=1.497925e-004;
n=95; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.611240e-005; ng(n+1)=1.497925e-004;
n=96; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=4.215896e-006; ng(n+1)=1.498214e-004;
n=97; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.787576e-006; ng(n+1)=1.498209e-004;
n=98; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=4.904537e-006; ng(n+1)=1.498208e-004;
n=99; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.023989e-005; ng(n+1)=1.498201e-004;
n=100; farx(n+1)=4.935667e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.380653e-006; ng(n+1)=1.498186e-004;
%odnowa zmiennej metryki
 % z³y kierunek w metodzie zm - odnowa 
 % z³y kierunek w metodzie zm po wykonaniu odnowy

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
