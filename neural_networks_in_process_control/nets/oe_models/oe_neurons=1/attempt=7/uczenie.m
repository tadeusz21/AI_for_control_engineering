%uczenie predyktora oe
clear all;
n=0; farx(n+1)=3.058521e+003; foe(n+1)=3.061583e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.603395e+003; foe(n+1)=2.605690e+003; krok(n+1)=3.325065e-004; ng(n+1)=1.264836e+003;
n=2; farx(n+1)=4.971366e+002; foe(n+1)=5.376690e+002; krok(n+1)=1.333847e-002; ng(n+1)=1.901179e+002;
n=3; farx(n+1)=4.958162e+002; foe(n+1)=5.253141e+002; krok(n+1)=2.462151e-005; ng(n+1)=1.628057e+003;
n=4; farx(n+1)=6.424769e+002; foe(n+1)=5.020786e+002; krok(n+1)=3.395966e-004; ng(n+1)=1.988689e+003;
n=5; farx(n+1)=3.849334e+002; foe(n+1)=4.459633e+002; krok(n+1)=4.935931e-003; ng(n+1)=5.560031e+002;
n=6; farx(n+1)=4.132957e+002; foe(n+1)=4.388052e+002; krok(n+1)=4.618991e-003; ng(n+1)=2.280644e+003;
n=7; farx(n+1)=3.705961e+002; foe(n+1)=4.340851e+002; krok(n+1)=5.852382e-003; ng(n+1)=2.223789e+003;
n=8; farx(n+1)=2.235935e+002; foe(n+1)=4.179791e+002; krok(n+1)=3.021288e-003; ng(n+1)=2.624912e+003;
n=9; farx(n+1)=9.155900e+001; foe(n+1)=3.735416e+002; krok(n+1)=1.467726e-001; ng(n+1)=5.328955e+003;
n=10; farx(n+1)=4.036670e+001; foe(n+1)=3.070275e+002; krok(n+1)=2.625380e-001; ng(n+1)=1.034170e+004;
n=11; farx(n+1)=2.018235e+001; foe(n+1)=1.196999e+002; krok(n+1)=5.377399e-001; ng(n+1)=1.442930e+004;
n=12; farx(n+1)=1.340291e+001; foe(n+1)=7.976558e+001; krok(n+1)=3.550835e-001; ng(n+1)=1.898739e+003;
n=13; farx(n+1)=9.885422e+000; foe(n+1)=7.119546e+001; krok(n+1)=1.218112e-001; ng(n+1)=9.240309e+002;
n=14; farx(n+1)=8.575112e+000; foe(n+1)=6.488384e+001; krok(n+1)=6.404647e-001; ng(n+1)=1.455415e+003;
n=15; farx(n+1)=8.493757e+000; foe(n+1)=6.293794e+001; krok(n+1)=7.807902e-001; ng(n+1)=9.349073e+002;
n=16; farx(n+1)=7.536145e+000; foe(n+1)=5.492069e+001; krok(n+1)=2.306654e+000; ng(n+1)=8.467370e+002;
n=17; farx(n+1)=6.638996e+000; foe(n+1)=5.252306e+001; krok(n+1)=1.002692e+000; ng(n+1)=1.296303e+003;
n=18; farx(n+1)=6.416683e+000; foe(n+1)=5.176506e+001; krok(n+1)=5.680238e-001; ng(n+1)=5.891596e+002;
n=19; farx(n+1)=6.502963e+000; foe(n+1)=5.079551e+001; krok(n+1)=1.157348e+000; ng(n+1)=5.170158e+002;
n=20; farx(n+1)=6.445433e+000; foe(n+1)=5.017572e+001; krok(n+1)=1.691553e+000; ng(n+1)=2.980260e+002;
n=21; farx(n+1)=6.280196e+000; foe(n+1)=5.001284e+001; krok(n+1)=1.263598e+000; ng(n+1)=1.516523e+002;
n=22; farx(n+1)=6.159979e+000; foe(n+1)=4.988099e+001; krok(n+1)=1.098329e+000; ng(n+1)=1.060007e+002;
n=23; farx(n+1)=6.311548e+000; foe(n+1)=4.955290e+001; krok(n+1)=3.745088e+000; ng(n+1)=1.152912e+002;
n=24; farx(n+1)=6.259486e+000; foe(n+1)=4.940045e+001; krok(n+1)=9.574267e-001; ng(n+1)=1.775169e+002;
n=25; farx(n+1)=6.062438e+000; foe(n+1)=4.928623e+001; krok(n+1)=1.322970e+000; ng(n+1)=1.890474e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=6.059253e+000; foe(n+1)=4.928297e+001; krok(n+1)=2.900558e-006; ng(n+1)=6.031978e+001;
n=27; farx(n+1)=6.058321e+000; foe(n+1)=4.927764e+001; krok(n+1)=1.191521e-005; ng(n+1)=4.508712e+001;
n=28; farx(n+1)=5.770400e+000; foe(n+1)=4.892664e+001; krok(n+1)=1.524981e-003; ng(n+1)=2.845247e+001;
n=29; farx(n+1)=5.884585e+000; foe(n+1)=4.870418e+001; krok(n+1)=8.559513e-005; ng(n+1)=1.031090e+002;
n=30; farx(n+1)=5.663804e+000; foe(n+1)=4.850925e+001; krok(n+1)=2.742688e-003; ng(n+1)=5.197833e+001;
n=31; farx(n+1)=6.459889e+000; foe(n+1)=4.804745e+001; krok(n+1)=2.560364e-002; ng(n+1)=5.098165e+001;
n=32; farx(n+1)=6.376304e+000; foe(n+1)=4.803217e+001; krok(n+1)=4.732423e-002; ng(n+1)=7.503094e+001;
n=33; farx(n+1)=5.993324e+000; foe(n+1)=4.774511e+001; krok(n+1)=1.390988e+000; ng(n+1)=1.053697e+002;
n=34; farx(n+1)=5.670557e+000; foe(n+1)=4.764328e+001; krok(n+1)=1.084311e+000; ng(n+1)=1.545781e+002;
n=35; farx(n+1)=5.457814e+000; foe(n+1)=4.760068e+001; krok(n+1)=6.986165e-001; ng(n+1)=4.606042e+001;
n=36; farx(n+1)=5.326171e+000; foe(n+1)=4.758182e+001; krok(n+1)=1.274317e+000; ng(n+1)=1.168906e+002;
n=37; farx(n+1)=5.202952e+000; foe(n+1)=4.755458e+001; krok(n+1)=1.492366e+000; ng(n+1)=8.134425e+001;
n=38; farx(n+1)=5.194428e+000; foe(n+1)=4.754654e+001; krok(n+1)=5.813025e-001; ng(n+1)=1.178998e+002;
n=39; farx(n+1)=5.080991e+000; foe(n+1)=4.753980e+001; krok(n+1)=7.536472e-001; ng(n+1)=3.297195e+001;
n=40; farx(n+1)=5.021984e+000; foe(n+1)=4.753728e+001; krok(n+1)=1.236406e+000; ng(n+1)=3.281633e+001;
n=41; farx(n+1)=4.964824e+000; foe(n+1)=4.753603e+001; krok(n+1)=1.062525e+000; ng(n+1)=2.735801e+001;
n=42; farx(n+1)=4.946606e+000; foe(n+1)=4.753577e+001; krok(n+1)=1.034903e+000; ng(n+1)=4.641713e+000;
n=43; farx(n+1)=4.939935e+000; foe(n+1)=4.753572e+001; krok(n+1)=9.001093e-001; ng(n+1)=8.393872e+000;
n=44; farx(n+1)=4.935316e+000; foe(n+1)=4.753571e+001; krok(n+1)=9.674698e-001; ng(n+1)=3.196657e+000;
n=45; farx(n+1)=4.935811e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.982775e-001; ng(n+1)=7.463255e-001;
n=46; farx(n+1)=4.935419e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.322970e+000; ng(n+1)=3.554510e-001;
n=47; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.120145e+000; ng(n+1)=7.833026e-002;
n=48; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.324083e-005; ng(n+1)=2.072214e-003;
n=49; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=4.300924e-011; ng(n+1)=2.072145e-003;
 % z造 kierunek w metodzie zm - odnowa 
n=50; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.385069e-006; ng(n+1)=2.072145e-003;
%odnowa zmiennej metryki
n=51; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.712708e-006; ng(n+1)=1.116809e-003;
n=52; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.325973e-006; ng(n+1)=2.240116e-003;
n=53; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.189876e-005; ng(n+1)=1.327150e-003;
n=54; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.611984e-007; ng(n+1)=5.342882e-004;
n=55; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.349696e-006; ng(n+1)=5.342868e-004;
n=56; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=8.609198e-006; ng(n+1)=5.343037e-004;
n=57; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=8.937881e-007; ng(n+1)=5.342994e-004;
n=58; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=7.783485e-006; ng(n+1)=5.342982e-004;
n=59; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.647078e-007; ng(n+1)=5.342936e-004;
n=60; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.294350e-005; ng(n+1)=5.342934e-004;
n=61; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.555074e-007; ng(n+1)=5.342866e-004;
n=62; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=8.848714e-008; ng(n+1)=5.342865e-004;
n=63; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=8.163720e-007; ng(n+1)=5.342864e-004;
n=64; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.335317e-008; ng(n+1)=5.342860e-004;
n=65; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.237833e-006; ng(n+1)=5.342860e-004;
n=66; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.720017e-005; ng(n+1)=5.342844e-004;
n=67; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=8.600086e-006; ng(n+1)=5.342716e-004;
n=68; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.373458e-005; ng(n+1)=5.342665e-004;
n=69; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.378849e-006; ng(n+1)=5.342588e-004;
n=70; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.952752e-009; ng(n+1)=5.342559e-004;
n=71; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=6.014514e-008; ng(n+1)=5.342559e-004;
n=72; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.296478e-009; ng(n+1)=5.342566e-004;
 % z造 kierunek w metodzie zm - odnowa 
n=73; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.674848e-006; ng(n+1)=5.342565e-004;
n=74; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.251840e-006; ng(n+1)=7.235704e-004;
n=75; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.774103e-005; ng(n+1)=3.379556e-004;
%odnowa zmiennej metryki
n=76; farx(n+1)=4.935681e+000; foe(n+1)=4.753571e+001; krok(n+1)=8.007771e-009; ng(n+1)=3.165845e-004;
 % z造 kierunek w metodzie zm - odnowa 
 % z造 kierunek w metodzie zm po wykonaniu odnowy

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
