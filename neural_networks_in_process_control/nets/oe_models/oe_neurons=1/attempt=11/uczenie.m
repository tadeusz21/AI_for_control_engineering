%uczenie predyktora oe
clear all;
n=0; farx(n+1)=3.053135e+003; foe(n+1)=3.056678e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.574162e+003; foe(n+1)=2.576624e+003; krok(n+1)=3.383827e-004; ng(n+1)=1.513589e+003;
n=2; farx(n+1)=5.886822e+002; foe(n+1)=6.026491e+002; krok(n+1)=5.381741e-003; ng(n+1)=4.800804e+002;
n=3; farx(n+1)=5.813893e+002; foe(n+1)=5.507606e+002; krok(n+1)=1.412779e-004; ng(n+1)=1.743374e+003;
n=4; farx(n+1)=8.942257e+002; foe(n+1)=5.147524e+002; krok(n+1)=1.995002e-003; ng(n+1)=1.798261e+003;
n=5; farx(n+1)=7.770014e+002; foe(n+1)=4.903134e+002; krok(n+1)=3.650930e-002; ng(n+1)=6.134562e+002;
n=6; farx(n+1)=7.158518e+002; foe(n+1)=4.870885e+002; krok(n+1)=1.392711e-002; ng(n+1)=7.406019e+002;
n=7; farx(n+1)=7.403851e+002; foe(n+1)=4.744443e+002; krok(n+1)=1.107294e-001; ng(n+1)=7.000814e+002;
n=8; farx(n+1)=3.168135e+002; foe(n+1)=3.743759e+002; krok(n+1)=2.921091e-001; ng(n+1)=6.788484e+002;
n=9; farx(n+1)=1.911644e+002; foe(n+1)=3.510545e+002; krok(n+1)=8.764941e-002; ng(n+1)=8.874660e+002;
n=10; farx(n+1)=1.816536e+002; foe(n+1)=3.398194e+002; krok(n+1)=3.926791e-002; ng(n+1)=1.472157e+003;
n=11; farx(n+1)=1.532587e+002; foe(n+1)=2.956303e+002; krok(n+1)=2.134155e-001; ng(n+1)=1.315961e+003;
n=12; farx(n+1)=7.792606e+001; foe(n+1)=2.509834e+002; krok(n+1)=8.922169e-001; ng(n+1)=3.445922e+002;
n=13; farx(n+1)=6.200949e+001; foe(n+1)=2.437308e+002; krok(n+1)=1.124683e-001; ng(n+1)=1.065634e+003;
n=14; farx(n+1)=1.974481e+001; foe(n+1)=1.412873e+002; krok(n+1)=1.476581e+000; ng(n+1)=1.779627e+003;
n=15; farx(n+1)=2.091464e+001; foe(n+1)=1.253657e+002; krok(n+1)=6.826594e-002; ng(n+1)=2.543292e+003;
n=16; farx(n+1)=1.903818e+001; foe(n+1)=1.008346e+002; krok(n+1)=1.501755e-001; ng(n+1)=3.106886e+003;
n=17; farx(n+1)=1.787869e+001; foe(n+1)=9.409865e+001; krok(n+1)=1.778431e-001; ng(n+1)=9.910478e+002;
n=18; farx(n+1)=1.480467e+001; foe(n+1)=8.590307e+001; krok(n+1)=5.804224e-001; ng(n+1)=7.017574e+002;
n=19; farx(n+1)=9.440756e+000; foe(n+1)=7.572057e+001; krok(n+1)=9.073805e-001; ng(n+1)=1.077859e+003;
n=20; farx(n+1)=1.013279e+001; foe(n+1)=6.410490e+001; krok(n+1)=1.077887e+000; ng(n+1)=1.458580e+003;
n=21; farx(n+1)=9.956235e+000; foe(n+1)=5.947062e+001; krok(n+1)=6.144464e-001; ng(n+1)=1.153304e+003;
n=22; farx(n+1)=7.354612e+000; foe(n+1)=5.436154e+001; krok(n+1)=1.368663e+000; ng(n+1)=1.130327e+003;
n=23; farx(n+1)=6.904099e+000; foe(n+1)=5.281144e+001; krok(n+1)=2.676098e-001; ng(n+1)=3.774115e+002;
n=24; farx(n+1)=7.173688e+000; foe(n+1)=5.177425e+001; krok(n+1)=5.976464e-001; ng(n+1)=3.261624e+002;
n=25; farx(n+1)=7.790926e+000; foe(n+1)=5.077165e+001; krok(n+1)=1.349819e+000; ng(n+1)=4.458293e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=7.662614e+000; foe(n+1)=5.039025e+001; krok(n+1)=2.596870e-006; ng(n+1)=8.960976e+002;
n=27; farx(n+1)=7.616871e+000; foe(n+1)=5.035351e+001; krok(n+1)=1.928098e-005; ng(n+1)=9.635114e+001;
n=28; farx(n+1)=7.464924e+000; foe(n+1)=5.026772e+001; krok(n+1)=1.052302e-004; ng(n+1)=6.255026e+001;
n=29; farx(n+1)=7.232131e+000; foe(n+1)=4.970036e+001; krok(n+1)=7.625735e-004; ng(n+1)=7.319996e+001;
n=30; farx(n+1)=7.403661e+000; foe(n+1)=4.907417e+001; krok(n+1)=5.945944e-003; ng(n+1)=7.026877e+001;
n=31; farx(n+1)=6.747419e+000; foe(n+1)=4.882382e+001; krok(n+1)=1.394089e-002; ng(n+1)=6.296917e+002;
n=32; farx(n+1)=6.380113e+000; foe(n+1)=4.876010e+001; krok(n+1)=6.442938e-002; ng(n+1)=9.155397e+002;
n=33; farx(n+1)=6.361201e+000; foe(n+1)=4.827677e+001; krok(n+1)=7.271671e-001; ng(n+1)=8.166482e+002;
n=34; farx(n+1)=6.076644e+000; foe(n+1)=4.789615e+001; krok(n+1)=1.675551e+000; ng(n+1)=1.615953e+002;
n=35; farx(n+1)=5.975877e+000; foe(n+1)=4.780736e+001; krok(n+1)=3.923690e-001; ng(n+1)=2.241028e+002;
n=36; farx(n+1)=5.802052e+000; foe(n+1)=4.770676e+001; krok(n+1)=8.745977e-001; ng(n+1)=4.022483e+002;
n=37; farx(n+1)=5.442236e+000; foe(n+1)=4.760837e+001; krok(n+1)=2.591187e+000; ng(n+1)=1.557771e+002;
n=38; farx(n+1)=5.326644e+000; foe(n+1)=4.758504e+001; krok(n+1)=4.353621e-001; ng(n+1)=4.779106e+001;
n=39; farx(n+1)=5.268248e+000; foe(n+1)=4.756708e+001; krok(n+1)=6.666685e-001; ng(n+1)=1.211303e+002;
n=40; farx(n+1)=5.225955e+000; foe(n+1)=4.755174e+001; krok(n+1)=1.545005e+000; ng(n+1)=7.160488e+001;
n=41; farx(n+1)=5.200891e+000; foe(n+1)=4.754377e+001; krok(n+1)=8.600077e-001; ng(n+1)=6.096116e+001;
n=42; farx(n+1)=5.077713e+000; foe(n+1)=4.753940e+001; krok(n+1)=8.457767e-001; ng(n+1)=2.724124e+001;
n=43; farx(n+1)=4.991690e+000; foe(n+1)=4.753678e+001; krok(n+1)=8.316025e-001; ng(n+1)=7.252800e+001;
n=44; farx(n+1)=4.956064e+000; foe(n+1)=4.753601e+001; krok(n+1)=1.841069e+000; ng(n+1)=1.227788e+001;
n=45; farx(n+1)=4.950822e+000; foe(n+1)=4.753585e+001; krok(n+1)=1.206369e+000; ng(n+1)=2.279277e+001;
n=46; farx(n+1)=4.934728e+000; foe(n+1)=4.753578e+001; krok(n+1)=9.282331e-001; ng(n+1)=8.291844e+000;
n=47; farx(n+1)=4.932858e+000; foe(n+1)=4.753572e+001; krok(n+1)=1.545005e+000; ng(n+1)=2.264437e+000;
n=48; farx(n+1)=4.932753e+000; foe(n+1)=4.753571e+001; krok(n+1)=8.202978e-001; ng(n+1)=1.959179e+000;
n=49; farx(n+1)=4.935464e+000; foe(n+1)=4.753571e+001; krok(n+1)=7.679697e-001; ng(n+1)=7.762081e-001;
n=50; farx(n+1)=4.935688e+000; foe(n+1)=4.753571e+001; krok(n+1)=9.703078e-001; ng(n+1)=1.140616e-001;
%odnowa zmiennej metryki
n=51; farx(n+1)=4.935688e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.033699e-006; ng(n+1)=1.532292e-002;
n=52; farx(n+1)=4.935688e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.866805e-006; ng(n+1)=2.038233e-003;
n=53; farx(n+1)=4.935687e+000; foe(n+1)=4.753571e+001; krok(n+1)=4.308692e-005; ng(n+1)=7.566061e-004;
n=54; farx(n+1)=4.935684e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.204607e-003; ng(n+1)=6.355624e-004;
n=55; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=7.740832e-003; ng(n+1)=3.584804e-004;
n=56; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=8.362643e-006; ng(n+1)=3.244361e-004;
n=57; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.838085e-008; ng(n+1)=3.244328e-004;
n=58; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=6.919174e-008; ng(n+1)=3.244328e-004;
n=59; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.106540e-007; ng(n+1)=3.244328e-004;
n=60; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.674848e-006; ng(n+1)=3.244327e-004;
n=61; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=4.292055e-007; ng(n+1)=3.244316e-004;
n=62; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.860122e-005; ng(n+1)=3.244315e-004;
n=63; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.761882e-006; ng(n+1)=3.244225e-004;
n=64; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=4.211819e-006; ng(n+1)=3.244212e-004;
n=65; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.545069e-009; ng(n+1)=3.244199e-004;
n=66; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.350843e-005; ng(n+1)=3.244199e-004;
n=67; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.139878e-005; ng(n+1)=3.244427e-004;
n=68; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.692932e-006; ng(n+1)=3.243806e-004;
n=69; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.345385e-008; ng(n+1)=3.243821e-004;
n=70; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.752380e-010; ng(n+1)=3.243821e-004;
n=71; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.500242e-009; ng(n+1)=3.243821e-004;
n=72; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=7.150304e-006; ng(n+1)=3.243821e-004;
n=73; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.403644e-006; ng(n+1)=3.243760e-004;
n=74; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.498586e-009; ng(n+1)=3.243747e-004;
n=75; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.703584e-005; ng(n+1)=3.243747e-004;
%odnowa zmiennej metryki
n=76; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.544280e-011; ng(n+1)=3.243678e-004;
n=77; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.575152e-006; ng(n+1)=3.243522e-004;
n=78; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=7.216790e-006; ng(n+1)=3.467465e-004;
n=79; farx(n+1)=4.935676e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.016831e-011; ng(n+1)=3.260455e-004;
 % z³y kierunek w metodzie zm - odnowa 
 % z³y kierunek w metodzie zm po wykonaniu odnowy

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
