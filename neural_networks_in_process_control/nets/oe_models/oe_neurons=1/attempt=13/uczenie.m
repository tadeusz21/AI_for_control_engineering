%uczenie predyktora oe
clear all;
n=0; farx(n+1)=3.111866e+003; foe(n+1)=3.053119e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.667211e+003; foe(n+1)=2.594160e+003; krok(n+1)=3.423805e-004; ng(n+1)=1.488933e+003;
n=2; farx(n+1)=6.066062e+002; foe(n+1)=5.429769e+002; krok(n+1)=1.000726e-002; ng(n+1)=3.758689e+002;
n=3; farx(n+1)=5.862786e+002; foe(n+1)=4.909892e+002; krok(n+1)=6.399708e-004; ng(n+1)=8.407893e+002;
n=4; farx(n+1)=5.552733e+002; foe(n+1)=4.389887e+002; krok(n+1)=1.758026e-003; ng(n+1)=7.699303e+002;
n=5; farx(n+1)=4.962728e+002; foe(n+1)=4.347044e+002; krok(n+1)=2.142359e-002; ng(n+1)=2.071636e+002;
n=6; farx(n+1)=4.930665e+002; foe(n+1)=4.183365e+002; krok(n+1)=3.586441e-002; ng(n+1)=3.205826e+002;
n=7; farx(n+1)=5.090021e+002; foe(n+1)=4.097358e+002; krok(n+1)=1.181740e-001; ng(n+1)=2.889688e+002;
n=8; farx(n+1)=4.562762e+002; foe(n+1)=3.938997e+002; krok(n+1)=9.397835e-001; ng(n+1)=2.124343e+002;
n=9; farx(n+1)=4.152683e+002; foe(n+1)=3.893228e+002; krok(n+1)=6.113321e-001; ng(n+1)=9.878267e+001;
n=10; farx(n+1)=3.607022e+002; foe(n+1)=3.837574e+002; krok(n+1)=5.144144e-001; ng(n+1)=1.398539e+002;
n=11; farx(n+1)=1.679318e+002; foe(n+1)=3.593838e+002; krok(n+1)=8.040192e-001; ng(n+1)=2.803984e+002;
n=12; farx(n+1)=1.392961e+002; foe(n+1)=3.556488e+002; krok(n+1)=2.896961e-002; ng(n+1)=9.905769e+002;
n=13; farx(n+1)=9.160972e+001; foe(n+1)=3.406027e+002; krok(n+1)=2.883317e-001; ng(n+1)=1.140663e+003;
n=14; farx(n+1)=8.584083e+001; foe(n+1)=3.168154e+002; krok(n+1)=1.420059e-001; ng(n+1)=1.692064e+003;
n=15; farx(n+1)=9.590826e+001; foe(n+1)=2.844810e+002; krok(n+1)=4.171530e-002; ng(n+1)=3.973481e+003;
n=16; farx(n+1)=9.287766e+001; foe(n+1)=2.593104e+002; krok(n+1)=3.655097e-001; ng(n+1)=2.986869e+003;
n=17; farx(n+1)=4.985336e+001; foe(n+1)=1.717855e+002; krok(n+1)=4.015963e-001; ng(n+1)=3.809205e+003;
n=18; farx(n+1)=3.802066e+001; foe(n+1)=1.469772e+002; krok(n+1)=1.601162e-001; ng(n+1)=1.525580e+003;
n=19; farx(n+1)=3.603660e+001; foe(n+1)=1.346480e+002; krok(n+1)=3.374549e-001; ng(n+1)=7.094659e+002;
n=20; farx(n+1)=2.187489e+001; foe(n+1)=1.099752e+002; krok(n+1)=1.068708e+000; ng(n+1)=1.002313e+003;
n=21; farx(n+1)=1.502877e+001; foe(n+1)=8.509411e+001; krok(n+1)=7.203499e-001; ng(n+1)=1.680574e+003;
n=22; farx(n+1)=1.245032e+001; foe(n+1)=6.803975e+001; krok(n+1)=5.050567e-001; ng(n+1)=4.612234e+002;
n=23; farx(n+1)=9.196136e+000; foe(n+1)=6.416630e+001; krok(n+1)=2.613267e-001; ng(n+1)=1.190428e+003;
n=24; farx(n+1)=7.863725e+000; foe(n+1)=6.169450e+001; krok(n+1)=2.162376e-001; ng(n+1)=2.895056e+002;
n=25; farx(n+1)=8.092323e+000; foe(n+1)=5.978096e+001; krok(n+1)=4.797949e-001; ng(n+1)=3.410245e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=8.170641e+000; foe(n+1)=5.889236e+001; krok(n+1)=4.858372e-006; ng(n+1)=7.978673e+002;
n=27; farx(n+1)=7.668861e+000; foe(n+1)=5.815887e+001; krok(n+1)=1.633361e-005; ng(n+1)=4.753927e+002;
n=28; farx(n+1)=7.816256e+000; foe(n+1)=5.776839e+001; krok(n+1)=1.874208e-004; ng(n+1)=1.169416e+002;
n=29; farx(n+1)=7.218851e+000; foe(n+1)=5.429086e+001; krok(n+1)=1.726346e-003; ng(n+1)=9.311541e+001;
n=30; farx(n+1)=7.543487e+000; foe(n+1)=5.333421e+001; krok(n+1)=1.876490e-003; ng(n+1)=8.166085e+002;
n=31; farx(n+1)=7.402072e+000; foe(n+1)=5.314790e+001; krok(n+1)=2.500228e-003; ng(n+1)=1.049895e+003;
n=32; farx(n+1)=8.647100e+000; foe(n+1)=5.246231e+001; krok(n+1)=3.785765e-001; ng(n+1)=1.288408e+003;
n=33; farx(n+1)=6.870705e+000; foe(n+1)=5.082116e+001; krok(n+1)=2.051030e-001; ng(n+1)=7.969213e+002;
n=34; farx(n+1)=6.428753e+000; foe(n+1)=4.924689e+001; krok(n+1)=1.174181e+000; ng(n+1)=4.259943e+002;
n=35; farx(n+1)=6.688158e+000; foe(n+1)=4.860729e+001; krok(n+1)=1.561751e+000; ng(n+1)=6.300210e+002;
n=36; farx(n+1)=6.775329e+000; foe(n+1)=4.818909e+001; krok(n+1)=4.188878e-001; ng(n+1)=3.418079e+002;
n=37; farx(n+1)=6.188286e+000; foe(n+1)=4.801642e+001; krok(n+1)=6.553300e-001; ng(n+1)=3.048018e+002;
n=38; farx(n+1)=5.835120e+000; foe(n+1)=4.791902e+001; krok(n+1)=7.101669e-001; ng(n+1)=2.059868e+002;
n=39; farx(n+1)=5.893957e+000; foe(n+1)=4.776791e+001; krok(n+1)=1.197939e+000; ng(n+1)=2.055359e+002;
n=40; farx(n+1)=5.919322e+000; foe(n+1)=4.768544e+001; krok(n+1)=5.535078e-001; ng(n+1)=9.468721e+001;
n=41; farx(n+1)=5.617118e+000; foe(n+1)=4.763512e+001; krok(n+1)=1.040723e+000; ng(n+1)=1.400015e+002;
n=42; farx(n+1)=5.389424e+000; foe(n+1)=4.760672e+001; krok(n+1)=8.536620e-001; ng(n+1)=1.601962e+002;
n=43; farx(n+1)=5.222773e+000; foe(n+1)=4.757451e+001; krok(n+1)=7.021280e-001; ng(n+1)=1.300425e+002;
n=44; farx(n+1)=5.187862e+000; foe(n+1)=4.755302e+001; krok(n+1)=1.090115e+000; ng(n+1)=5.245386e+001;
n=45; farx(n+1)=5.147723e+000; foe(n+1)=4.754848e+001; krok(n+1)=7.808753e-001; ng(n+1)=4.384499e+001;
n=46; farx(n+1)=5.010842e+000; foe(n+1)=4.754308e+001; krok(n+1)=7.215816e-001; ng(n+1)=9.050587e+001;
n=47; farx(n+1)=5.028780e+000; foe(n+1)=4.754011e+001; krok(n+1)=1.221873e+000; ng(n+1)=3.315276e+001;
n=48; farx(n+1)=5.020600e+000; foe(n+1)=4.753913e+001; krok(n+1)=1.315598e+000; ng(n+1)=3.863628e+001;
n=49; farx(n+1)=5.038012e+000; foe(n+1)=4.753816e+001; krok(n+1)=1.611198e+000; ng(n+1)=2.950053e+001;
n=50; farx(n+1)=5.006139e+000; foe(n+1)=4.753680e+001; krok(n+1)=2.535448e+000; ng(n+1)=4.593806e+000;
%odnowa zmiennej metryki
n=51; farx(n+1)=5.005601e+000; foe(n+1)=4.753664e+001; krok(n+1)=1.174108e-006; ng(n+1)=2.748715e+001;
n=52; farx(n+1)=5.006001e+000; foe(n+1)=4.753656e+001; krok(n+1)=4.920561e-006; ng(n+1)=8.389873e+000;
n=53; farx(n+1)=5.007263e+000; foe(n+1)=4.753654e+001; krok(n+1)=2.832743e-005; ng(n+1)=1.692825e+000;
n=54; farx(n+1)=5.004550e+000; foe(n+1)=4.753643e+001; krok(n+1)=1.284363e-003; ng(n+1)=5.927502e-001;
n=55; farx(n+1)=5.009167e+000; foe(n+1)=4.753629e+001; krok(n+1)=3.370660e-002; ng(n+1)=1.552735e-001;
n=56; farx(n+1)=4.939080e+000; foe(n+1)=4.753574e+001; krok(n+1)=1.643984e-001; ng(n+1)=1.349416e-001;
n=57; farx(n+1)=4.941021e+000; foe(n+1)=4.753573e+001; krok(n+1)=1.142218e-002; ng(n+1)=5.097065e+000;
n=58; farx(n+1)=4.938373e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.015268e+000; ng(n+1)=5.259336e+000;
n=59; farx(n+1)=4.935665e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.006076e+000; ng(n+1)=1.935817e-001;
n=60; farx(n+1)=4.935665e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.623769e-006; ng(n+1)=2.493140e-002;
n=61; farx(n+1)=4.935665e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.681612e-009; ng(n+1)=2.493135e-002;
n=62; farx(n+1)=4.935665e+000; foe(n+1)=4.753571e+001; krok(n+1)=4.983721e-012; ng(n+1)=2.493135e-002;
n=63; farx(n+1)=4.935665e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.339724e-003; ng(n+1)=2.493135e-002;
n=64; farx(n+1)=4.935665e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.860122e-005; ng(n+1)=2.596900e-002;
n=65; farx(n+1)=4.935665e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.314842e-006; ng(n+1)=2.596792e-002;
n=66; farx(n+1)=4.935665e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.592579e-006; ng(n+1)=2.596779e-002;
n=67; farx(n+1)=4.935665e+000; foe(n+1)=4.753571e+001; krok(n+1)=6.595869e-008; ng(n+1)=2.596770e-002;
n=68; farx(n+1)=4.935665e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.515724e-005; ng(n+1)=2.596770e-002;
n=69; farx(n+1)=4.935665e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.862027e-005; ng(n+1)=2.596705e-002;
n=70; farx(n+1)=4.935665e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.422827e-005; ng(n+1)=2.596657e-002;
n=71; farx(n+1)=4.935665e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.895924e-005; ng(n+1)=2.596620e-002;
n=72; farx(n+1)=4.935665e+000; foe(n+1)=4.753571e+001; krok(n+1)=4.863420e-005; ng(n+1)=2.596571e-002;
n=73; farx(n+1)=4.935665e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.418894e-005; ng(n+1)=2.596445e-002;
n=74; farx(n+1)=4.935665e+000; foe(n+1)=4.753571e+001; krok(n+1)=9.302997e-006; ng(n+1)=2.596382e-002;
n=75; farx(n+1)=4.935665e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.815694e-005; ng(n+1)=2.596358e-002;
%odnowa zmiennej metryki
n=76; farx(n+1)=4.935666e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.625920e-006; ng(n+1)=2.596285e-002;
n=77; farx(n+1)=4.935666e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.246727e-006; ng(n+1)=2.151046e-002;
n=78; farx(n+1)=4.935668e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.467297e-005; ng(n+1)=2.578704e-003;
n=79; farx(n+1)=4.935693e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.031346e-002; ng(n+1)=6.817657e-004;
n=80; farx(n+1)=4.935694e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.654576e-003; ng(n+1)=4.698904e-004;
n=81; farx(n+1)=4.935694e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.504930e-010; ng(n+1)=4.798176e-004;
n=82; farx(n+1)=4.935694e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.407312e-011; ng(n+1)=4.798176e-004;
n=83; farx(n+1)=4.935694e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.283004e-011; ng(n+1)=4.798176e-004;
 % z³y kierunek w metodzie zm - odnowa 
n=84; farx(n+1)=4.935694e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.879838e-013; ng(n+1)=4.798177e-004;
 % z³y kierunek w metodzie zm - odnowa 
 % z³y kierunek w metodzie zm po wykonaniu odnowy

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
