%uczenie predyktora oe
clear all;
n=0; farx(n+1)=3.089158e+003; foe(n+1)=3.086748e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.609900e+003; foe(n+1)=2.610261e+003; krok(n+1)=3.301872e-004; ng(n+1)=1.629957e+003;
n=2; farx(n+1)=4.915642e+002; foe(n+1)=4.940103e+002; krok(n+1)=5.671128e-002; ng(n+1)=4.726379e+001;
n=3; farx(n+1)=4.900521e+002; foe(n+1)=4.936861e+002; krok(n+1)=5.966581e-005; ng(n+1)=2.947156e+002;
n=4; farx(n+1)=4.972726e+002; foe(n+1)=4.935391e+002; krok(n+1)=5.934596e-004; ng(n+1)=3.157661e+002;
n=5; farx(n+1)=6.032453e+002; foe(n+1)=4.843094e+002; krok(n+1)=2.529683e-002; ng(n+1)=3.064814e+002;
n=6; farx(n+1)=5.396267e+002; foe(n+1)=4.617167e+002; krok(n+1)=1.057221e-001; ng(n+1)=2.820685e+002;
n=7; farx(n+1)=1.043781e+002; foe(n+1)=3.326161e+002; krok(n+1)=1.778431e-001; ng(n+1)=3.489891e+002;
n=8; farx(n+1)=1.026347e+002; foe(n+1)=3.323967e+002; krok(n+1)=5.873010e-005; ng(n+1)=2.255460e+003;
n=9; farx(n+1)=1.070164e+002; foe(n+1)=3.147879e+002; krok(n+1)=5.403833e-001; ng(n+1)=2.398753e+003;
n=10; farx(n+1)=1.041106e+002; foe(n+1)=2.854786e+002; krok(n+1)=9.139037e-002; ng(n+1)=2.734383e+003;
n=11; farx(n+1)=8.389527e+001; foe(n+1)=2.401994e+002; krok(n+1)=1.150668e-001; ng(n+1)=2.245606e+003;
n=12; farx(n+1)=7.169175e+001; foe(n+1)=2.243456e+002; krok(n+1)=1.557251e-001; ng(n+1)=1.736825e+003;
n=13; farx(n+1)=4.205376e+001; foe(n+1)=1.523024e+002; krok(n+1)=2.895359e+000; ng(n+1)=1.729109e+003;
n=14; farx(n+1)=3.445254e+001; foe(n+1)=1.466091e+002; krok(n+1)=7.113726e-001; ng(n+1)=6.624943e+002;
n=15; farx(n+1)=3.445405e+001; foe(n+1)=1.461922e+002; krok(n+1)=1.071906e-001; ng(n+1)=7.694961e+002;
n=16; farx(n+1)=2.754810e+001; foe(n+1)=1.398979e+002; krok(n+1)=1.999172e+000; ng(n+1)=5.805105e+002;
n=17; farx(n+1)=2.524584e+001; foe(n+1)=1.331799e+002; krok(n+1)=8.027177e-001; ng(n+1)=1.015791e+003;
n=18; farx(n+1)=2.724080e+001; foe(n+1)=1.264570e+002; krok(n+1)=1.021441e+000; ng(n+1)=8.460368e+002;
n=19; farx(n+1)=2.575620e+001; foe(n+1)=1.185720e+002; krok(n+1)=1.186820e+000; ng(n+1)=4.734483e+002;
n=20; farx(n+1)=2.530304e+001; foe(n+1)=1.061473e+002; krok(n+1)=8.575247e-001; ng(n+1)=8.658914e+002;
n=21; farx(n+1)=2.080281e+001; foe(n+1)=8.682164e+001; krok(n+1)=1.530125e+000; ng(n+1)=1.055809e+003;
n=22; farx(n+1)=1.431410e+001; foe(n+1)=7.543479e+001; krok(n+1)=5.570755e-001; ng(n+1)=1.225270e+003;
n=23; farx(n+1)=9.375882e+000; foe(n+1)=6.540249e+001; krok(n+1)=6.809733e-001; ng(n+1)=2.898567e+002;
n=24; farx(n+1)=8.308929e+000; foe(n+1)=6.025198e+001; krok(n+1)=3.838379e-001; ng(n+1)=7.379131e+002;
n=25; farx(n+1)=7.942284e+000; foe(n+1)=5.803659e+001; krok(n+1)=6.674595e-001; ng(n+1)=6.401489e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=7.763121e+000; foe(n+1)=5.733962e+001; krok(n+1)=3.561028e-006; ng(n+1)=1.070564e+003;
n=27; farx(n+1)=7.786382e+000; foe(n+1)=5.686547e+001; krok(n+1)=1.018184e-004; ng(n+1)=1.613841e+002;
n=28; farx(n+1)=7.962922e+000; foe(n+1)=5.675297e+001; krok(n+1)=3.392764e-005; ng(n+1)=1.350271e+002;
n=29; farx(n+1)=8.321747e+000; foe(n+1)=5.384198e+001; krok(n+1)=1.742611e-003; ng(n+1)=9.457861e+001;
n=30; farx(n+1)=8.177666e+000; foe(n+1)=5.282322e+001; krok(n+1)=1.667309e-003; ng(n+1)=2.761231e+002;
n=31; farx(n+1)=8.029128e+000; foe(n+1)=5.255737e+001; krok(n+1)=4.515106e-003; ng(n+1)=5.878462e+002;
n=32; farx(n+1)=7.047568e+000; foe(n+1)=5.225768e+001; krok(n+1)=9.228634e-002; ng(n+1)=7.372406e+002;
n=33; farx(n+1)=6.582886e+000; foe(n+1)=5.036140e+001; krok(n+1)=7.310195e-001; ng(n+1)=7.195767e+002;
n=34; farx(n+1)=6.623452e+000; foe(n+1)=4.891847e+001; krok(n+1)=1.331649e+000; ng(n+1)=5.215337e+002;
n=35; farx(n+1)=6.469315e+000; foe(n+1)=4.850526e+001; krok(n+1)=1.162023e+000; ng(n+1)=2.541320e+002;
n=36; farx(n+1)=6.251643e+000; foe(n+1)=4.806900e+001; krok(n+1)=5.900599e-001; ng(n+1)=5.263392e+002;
n=37; farx(n+1)=6.069562e+000; foe(n+1)=4.782345e+001; krok(n+1)=7.101669e-001; ng(n+1)=1.308323e+002;
n=38; farx(n+1)=5.953765e+000; foe(n+1)=4.776165e+001; krok(n+1)=8.922448e-001; ng(n+1)=1.318622e+002;
n=39; farx(n+1)=5.526502e+000; foe(n+1)=4.760700e+001; krok(n+1)=2.002945e+000; ng(n+1)=3.019962e+002;
n=40; farx(n+1)=5.378500e+000; foe(n+1)=4.758703e+001; krok(n+1)=5.600723e-001; ng(n+1)=1.259612e+002;
n=41; farx(n+1)=5.279904e+000; foe(n+1)=4.757793e+001; krok(n+1)=2.615920e-001; ng(n+1)=1.208336e+002;
n=42; farx(n+1)=5.255597e+000; foe(n+1)=4.756535e+001; krok(n+1)=1.386016e+000; ng(n+1)=5.402387e+001;
n=43; farx(n+1)=5.074624e+000; foe(n+1)=4.754706e+001; krok(n+1)=1.348916e+000; ng(n+1)=1.083110e+002;
n=44; farx(n+1)=5.106963e+000; foe(n+1)=4.754190e+001; krok(n+1)=8.067975e-001; ng(n+1)=5.166876e+001;
n=45; farx(n+1)=5.036442e+000; foe(n+1)=4.753899e+001; krok(n+1)=9.282331e-001; ng(n+1)=4.548448e+001;
n=46; farx(n+1)=4.992552e+000; foe(n+1)=4.753813e+001; krok(n+1)=1.740861e+000; ng(n+1)=3.303828e+001;
n=47; farx(n+1)=4.983146e+000; foe(n+1)=4.753730e+001; krok(n+1)=7.310195e-001; ng(n+1)=4.608126e+001;
n=48; farx(n+1)=4.945140e+000; foe(n+1)=4.753607e+001; krok(n+1)=1.792232e+000; ng(n+1)=2.430119e+001;
n=49; farx(n+1)=4.915700e+000; foe(n+1)=4.753582e+001; krok(n+1)=8.289013e-001; ng(n+1)=1.331703e+001;
n=50; farx(n+1)=4.928240e+000; foe(n+1)=4.753573e+001; krok(n+1)=1.625559e+000; ng(n+1)=3.594878e+000;
%odnowa zmiennej metryki
n=51; farx(n+1)=4.928099e+000; foe(n+1)=4.753572e+001; krok(n+1)=5.678744e-006; ng(n+1)=2.192582e+000;
n=52; farx(n+1)=4.927961e+000; foe(n+1)=4.753572e+001; krok(n+1)=1.532532e-006; ng(n+1)=1.953687e+000;
n=53; farx(n+1)=4.927446e+000; foe(n+1)=4.753572e+001; krok(n+1)=1.480572e-005; ng(n+1)=1.120296e+000;
n=54; farx(n+1)=4.928231e+000; foe(n+1)=4.753572e+001; krok(n+1)=4.640565e-003; ng(n+1)=3.628405e-002;
n=55; farx(n+1)=4.929094e+000; foe(n+1)=4.753572e+001; krok(n+1)=4.077649e-003; ng(n+1)=3.590707e-002;
n=56; farx(n+1)=4.929031e+000; foe(n+1)=4.753571e+001; krok(n+1)=6.473652e-002; ng(n+1)=1.090544e-002;
n=57; farx(n+1)=4.935683e+000; foe(n+1)=4.753571e+001; krok(n+1)=7.897489e-002; ng(n+1)=1.529980e-002;
n=58; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=9.942122e-001; ng(n+1)=4.882094e-002;
n=59; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.171639e-006; ng(n+1)=3.402311e-004;
n=60; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=4.062845e-007; ng(n+1)=3.402301e-004;
n=61; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.248676e-006; ng(n+1)=3.402299e-004;
n=62; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.281243e-007; ng(n+1)=3.402282e-004;
n=63; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=4.801217e-006; ng(n+1)=3.402281e-004;
n=64; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.709072e-006; ng(n+1)=3.402261e-004;
n=65; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=8.557623e-008; ng(n+1)=3.402252e-004;
n=66; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.421871e-009; ng(n+1)=3.402251e-004;
n=67; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=4.778846e-010; ng(n+1)=3.402251e-004;
 % z³y kierunek w metodzie zm - odnowa 
n=68; farx(n+1)=4.935686e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.542464e-013; ng(n+1)=3.402251e-004;
 % z³y kierunek w metodzie zm - odnowa 
 % z³y kierunek w metodzie zm po wykonaniu odnowy

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
