%uczenie predyktora oe
clear all;
n=0; farx(n+1)=2.994213e+003; foe(n+1)=3.036999e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.447292e+003; foe(n+1)=2.514963e+003; krok(n+1)=3.505243e-004; ng(n+1)=1.690496e+003;
n=2; farx(n+1)=6.264058e+002; foe(n+1)=7.298952e+002; krok(n+1)=2.728971e-003; ng(n+1)=8.711548e+002;
n=3; farx(n+1)=6.180792e+002; foe(n+1)=5.928586e+002; krok(n+1)=1.882222e-004; ng(n+1)=2.631145e+003;
n=4; farx(n+1)=1.039616e+003; foe(n+1)=5.258984e+002; krok(n+1)=1.736904e-003; ng(n+1)=2.387264e+003;
n=5; farx(n+1)=1.168460e+003; foe(n+1)=5.058893e+002; krok(n+1)=1.658369e-002; ng(n+1)=7.021228e+002;
n=6; farx(n+1)=1.128829e+003; foe(n+1)=5.047379e+002; krok(n+1)=4.282689e-003; ng(n+1)=3.894172e+002;
n=7; farx(n+1)=9.068471e+002; foe(n+1)=4.935322e+002; krok(n+1)=3.280985e-002; ng(n+1)=4.549014e+002;
n=8; farx(n+1)=4.017851e+002; foe(n+1)=3.918507e+002; krok(n+1)=3.635836e-001; ng(n+1)=8.205502e+002;
n=9; farx(n+1)=2.211137e+002; foe(n+1)=3.668087e+002; krok(n+1)=2.224108e-001; ng(n+1)=7.668045e+002;
n=10; farx(n+1)=1.234616e+002; foe(n+1)=3.020888e+002; krok(n+1)=2.726979e-001; ng(n+1)=1.461565e+003;
n=11; farx(n+1)=6.012688e+001; foe(n+1)=2.556605e+002; krok(n+1)=6.480438e-001; ng(n+1)=4.846433e+002;
n=12; farx(n+1)=3.930353e+001; foe(n+1)=2.343022e+002; krok(n+1)=2.828655e-001; ng(n+1)=1.992266e+003;
n=13; farx(n+1)=2.762979e+001; foe(n+1)=1.479511e+002; krok(n+1)=6.522451e-001; ng(n+1)=1.933153e+003;
n=14; farx(n+1)=2.301744e+001; foe(n+1)=1.351277e+002; krok(n+1)=1.540084e-001; ng(n+1)=1.351217e+003;
n=15; farx(n+1)=2.014186e+001; foe(n+1)=1.108748e+002; krok(n+1)=4.698917e-001; ng(n+1)=2.359001e+003;
n=16; farx(n+1)=2.178011e+001; foe(n+1)=1.026629e+002; krok(n+1)=2.307159e-002; ng(n+1)=1.690528e+003;
n=17; farx(n+1)=1.908803e+001; foe(n+1)=9.752557e+001; krok(n+1)=3.136529e-001; ng(n+1)=1.121305e+003;
n=18; farx(n+1)=1.202699e+001; foe(n+1)=7.957557e+001; krok(n+1)=1.541916e+000; ng(n+1)=1.104909e+003;
n=19; farx(n+1)=9.750035e+000; foe(n+1)=6.764382e+001; krok(n+1)=4.065930e-001; ng(n+1)=3.034029e+002;
n=20; farx(n+1)=8.567001e+000; foe(n+1)=6.431863e+001; krok(n+1)=1.775417e-001; ng(n+1)=1.030156e+003;
n=21; farx(n+1)=8.956116e+000; foe(n+1)=6.121270e+001; krok(n+1)=8.417937e-001; ng(n+1)=4.873062e+002;
n=22; farx(n+1)=8.494652e+000; foe(n+1)=5.694921e+001; krok(n+1)=8.252141e-001; ng(n+1)=1.294162e+003;
n=23; farx(n+1)=7.988012e+000; foe(n+1)=5.307620e+001; krok(n+1)=5.386904e-001; ng(n+1)=3.033855e+002;
n=24; farx(n+1)=6.970995e+000; foe(n+1)=5.190269e+001; krok(n+1)=4.112198e-001; ng(n+1)=4.882375e+002;
n=25; farx(n+1)=6.053214e+000; foe(n+1)=5.062009e+001; krok(n+1)=8.456470e-001; ng(n+1)=1.105042e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=6.161663e+000; foe(n+1)=5.051027e+001; krok(n+1)=4.657599e-005; ng(n+1)=1.095764e+002;
n=27; farx(n+1)=6.180345e+000; foe(n+1)=5.046334e+001; krok(n+1)=3.846143e-006; ng(n+1)=2.573609e+002;
n=28; farx(n+1)=6.208048e+000; foe(n+1)=5.045261e+001; krok(n+1)=1.886606e-005; ng(n+1)=5.839840e+001;
n=29; farx(n+1)=6.311111e+000; foe(n+1)=4.944497e+001; krok(n+1)=4.929920e-003; ng(n+1)=2.359178e+001;
n=30; farx(n+1)=6.427019e+000; foe(n+1)=4.927524e+001; krok(n+1)=2.121656e-003; ng(n+1)=4.571165e+002;
n=31; farx(n+1)=6.246904e+000; foe(n+1)=4.908909e+001; krok(n+1)=5.767896e-003; ng(n+1)=4.477715e+002;
n=32; farx(n+1)=6.783657e+000; foe(n+1)=4.895361e+001; krok(n+1)=3.790730e-002; ng(n+1)=7.235853e+002;
n=33; farx(n+1)=6.317469e+000; foe(n+1)=4.835761e+001; krok(n+1)=1.280929e+000; ng(n+1)=6.523968e+002;
n=34; farx(n+1)=6.270637e+000; foe(n+1)=4.797504e+001; krok(n+1)=1.280117e+000; ng(n+1)=2.336847e+002;
n=35; farx(n+1)=5.990097e+000; foe(n+1)=4.782553e+001; krok(n+1)=1.380032e+000; ng(n+1)=2.259837e+002;
n=36; farx(n+1)=5.693162e+000; foe(n+1)=4.766004e+001; krok(n+1)=1.120145e+000; ng(n+1)=4.382918e+002;
n=37; farx(n+1)=5.475848e+000; foe(n+1)=4.761405e+001; krok(n+1)=1.310660e+000; ng(n+1)=1.405904e+002;
n=38; farx(n+1)=5.363981e+000; foe(n+1)=4.758651e+001; krok(n+1)=3.329123e-001; ng(n+1)=1.534565e+002;
n=39; farx(n+1)=5.199454e+000; foe(n+1)=4.756261e+001; krok(n+1)=9.397835e-001; ng(n+1)=8.631118e+001;
n=40; farx(n+1)=5.128075e+000; foe(n+1)=4.755132e+001; krok(n+1)=9.282331e-001; ng(n+1)=7.059450e+001;
n=41; farx(n+1)=5.123920e+000; foe(n+1)=4.754155e+001; krok(n+1)=1.352332e+000; ng(n+1)=5.460914e+001;
n=42; farx(n+1)=5.070048e+000; foe(n+1)=4.753924e+001; krok(n+1)=4.803134e-001; ng(n+1)=1.510502e+001;
n=43; farx(n+1)=4.988997e+000; foe(n+1)=4.753704e+001; krok(n+1)=1.454334e+000; ng(n+1)=6.990746e+001;
n=44; farx(n+1)=4.948834e+000; foe(n+1)=4.753590e+001; krok(n+1)=1.285695e+000; ng(n+1)=2.243381e+001;
n=45; farx(n+1)=4.937591e+000; foe(n+1)=4.753575e+001; krok(n+1)=8.771846e-001; ng(n+1)=3.372196e+000;
n=46; farx(n+1)=4.930849e+000; foe(n+1)=4.753572e+001; krok(n+1)=1.009068e+000; ng(n+1)=7.589194e+000;
n=47; farx(n+1)=4.933734e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.596492e-001; ng(n+1)=2.988884e+000;
n=48; farx(n+1)=4.933666e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.745690e+000; ng(n+1)=7.452251e-001;
n=49; farx(n+1)=4.935413e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.668762e+000; ng(n+1)=4.025197e-001;
n=50; farx(n+1)=4.935665e+000; foe(n+1)=4.753571e+001; krok(n+1)=9.685429e-001; ng(n+1)=1.496567e-001;
%odnowa zmiennej metryki
n=51; farx(n+1)=4.935665e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.075011e-006; ng(n+1)=1.275557e-002;
n=52; farx(n+1)=4.935665e+000; foe(n+1)=4.753571e+001; krok(n+1)=5.329233e-006; ng(n+1)=3.518902e-003;
n=53; farx(n+1)=4.935664e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.418894e-005; ng(n+1)=1.086041e-003;
n=54; farx(n+1)=4.935666e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.338974e-003; ng(n+1)=3.822426e-004;
n=55; farx(n+1)=4.935666e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.893682e-006; ng(n+1)=2.259353e-004;
n=56; farx(n+1)=4.935666e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.052240e-006; ng(n+1)=2.259089e-004;
n=57; farx(n+1)=4.935666e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.420880e-005; ng(n+1)=2.259091e-004;
n=58; farx(n+1)=4.935666e+000; foe(n+1)=4.753571e+001; krok(n+1)=4.549370e-006; ng(n+1)=2.258966e-004;
n=59; farx(n+1)=4.935666e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.359409e-008; ng(n+1)=2.258954e-004;
n=60; farx(n+1)=4.935666e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.715887e-007; ng(n+1)=2.258954e-004;
n=61; farx(n+1)=4.935666e+000; foe(n+1)=4.753571e+001; krok(n+1)=4.211646e-009; ng(n+1)=2.258953e-004;
n=62; farx(n+1)=4.935666e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.726646e-006; ng(n+1)=2.258953e-004;
n=63; farx(n+1)=4.935666e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.002836e-005; ng(n+1)=2.258933e-004;
n=64; farx(n+1)=4.935666e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.838085e-008; ng(n+1)=2.258924e-004;
n=65; farx(n+1)=4.935666e+000; foe(n+1)=4.753571e+001; krok(n+1)=3.422476e-009; ng(n+1)=2.258924e-004;
n=66; farx(n+1)=4.935666e+000; foe(n+1)=4.753571e+001; krok(n+1)=2.181637e-011; ng(n+1)=2.258925e-004;
n=67; farx(n+1)=4.935666e+000; foe(n+1)=4.753571e+001; krok(n+1)=6.416510e-009; ng(n+1)=2.258925e-004;
n=68; farx(n+1)=4.935666e+000; foe(n+1)=4.753571e+001; krok(n+1)=8.145493e-010; ng(n+1)=2.258922e-004;
n=69; farx(n+1)=4.935666e+000; foe(n+1)=4.753571e+001; krok(n+1)=1.586435e-010; ng(n+1)=2.258922e-004;
 % z³y kierunek w metodzie zm - odnowa 
 % z³y kierunek w metodzie zm po wykonaniu odnowy

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
